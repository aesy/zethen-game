(()=>{"use strict";var t={432:function(t,e,n){let r,i;function s(t,e){return Math.min(Math.max(t,e.min),e.max)}n.d(e,{d:()=>er}),n(793);class o{x;y;static ORIGIN=o.zero();constructor(t,e){this.x=t,this.y=e}static zero(){return new o(0,0)}static midpoint(t,e){return new o((t.x+e.x)/2,(t.y+e.y)/2)}static from(t){return new o(t.x??0,t.y??0)}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.x/=t,this.y/=t,this}transformMat2(t){let{x:e,y:n}=this;return this.x=t[0]*e+t[2]*n,this.y=t[1]*e+t[3]*n,this}transformMat3(t){let{x:e,y:n}=this;return this.x=t[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this}directionTo(t){return a.direction(this,t)}distanceTo(t){return o.distanceBetween(this,t)}distanceToSquared(t){return o.distanceBetweenSquared(this,t)}isZero(t=Number.EPSILON){return o.isZero(this,t)}isNan(){return o.isNan(this)}equals(t,e=Number.EPSILON){return o.equals(this,t,e)}copy(t){return this.x=t.x,this.y=t.y,this}clone(){return new o(this.x,this.y)}toVec(){return a.from(this)}toString(){let t=this.x.toFixed(1),e=this.y.toFixed(1);return`Pnt2(x:${t}, y:${e})`}}(I=o||(o={})).add=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},I.addScalar=function(t,e){return{x:t.x+e,y:t.y+e}},I.subtract=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},I.subtractScalar=function(t,e){return{x:t.x-e,y:t.y-e}},I.multiply=function(t,e){return{x:t.x*e.x,y:t.y*e.y}},I.multiplyScalar=function(t,e){return{x:t.x*e,y:t.y*e}},I.divide=function(t,e){return{x:t.x/e.x,y:t.y/e.y}},I.divideScalar=function(t,e){return{x:t.x/e,y:t.y/e}},I.transformMat2=function(t,e){return{x:e[0]*t.x+e[2]*t.y,y:e[1]*t.x+e[3]*t.y}},I.transformMat3=function(t,e){return{x:e[0]*t.x+e[3]*t.y+e[6],y:e[1]*t.x+e[4]*t.y+e[7]}},I.distanceBetween=function(t,e){return Math.sqrt(I.distanceBetweenSquared(t,e))},I.distanceBetweenSquared=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},I.isZero=function(t,e=Number.EPSILON){return Math.abs(t.x)<e&&Math.abs(t.y)<e},I.isNan=function(t){return isNaN(t.x)||isNaN(t.y)},I.equals=function(t,e,n=Number.EPSILON){return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n};class a{x;y;static ZERO=a.zero();constructor(t,e){this.x=t,this.y=e}get magnitude(){return a.getMagnitude(this)}set magnitude(t){let e=this.magnitude;this.x=this.x/e*t,this.y=this.y/e*t}get magnitudeSquared(){return a.getMagnitudeSquared(this)}get angle(){return a.getAngle(this)}set angle(t){let e=this.magnitude;this.x=e*Math.cos(t),this.y=e*Math.sin(t)}static zero(){return new a(0,0)}static unit(t){return a.polar(t,1)}static polar(t,e){return new a(e*Math.cos(t),e*Math.sin(t))}static direction(t,e){return a.from(e).subtract(t)}static from(t){return new a(t.x??0,t.y??0)}dot(t){return a.dot(this,t)}normalize(){let t=this.magnitude;return this.x/=t||1,this.y/=t||1,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}subtractScalar(t){return this.x-=t,this.y-=t,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.x/=t,this.y/=t,this}transformMat2(t){let{x:e,y:n}=this;return this.x=t[0]*e+t[2]*n,this.y=t[1]*e+t[3]*n,this}transformMat3(t){let{x:e,y:n}=this;return this.x=t[0]*e+t[3]*n+t[6],this.y=t[1]*e+t[4]*n+t[7],this}negate(){return this.x*=-1,this.y*=-1,this}invert(){return this.x=1/this.x,this.y=1/this.y,this}maxMagnitude(t){return this.magnitude=Math.max(this.magnitude,t),this}minMagnitude(t){return this.magnitude=Math.min(this.magnitude,t),this}clampMagnitude(t,e){return this.magnitude=s(this.magnitude,{min:t,max:e}),this}isZero(t=Number.EPSILON){return a.isZero(this,t)}isNan(){return a.isNan(this)}equals(t,e=Number.EPSILON){return a.equals(this,t,e)}copy(t){return this.x=t.x,this.y=t.y,this}clone(){return new a(this.x,this.y)}toPoint(){return o.from(this)}toString(){let t=this.x.toFixed(1),e=this.y.toFixed(1);return`Vec2(x:${t}, y:${e})`}}(O=a||(a={})).getMagnitude=function(t){return Math.sqrt(O.getMagnitudeSquared(t))},O.setMagnitude=function(t,e){let n=O.getMagnitude(t);return{x:t.x/n*e,y:t.y/n*e}},O.getMagnitudeSquared=function(t){return Math.pow(t.x,2)+Math.pow(t.y,2)},O.getAngle=function(t){return Math.atan2(t.y,t.x)},O.setAngle=function(t,e){let n=O.getMagnitude(t);return{x:n*Math.cos(e),y:n*Math.sin(e)}},O.dot=function(t,e){return t.x*e.x+t.y*e.y},O.normalize=function(t){let e=O.getMagnitude(t);return{x:t.x/e||1,y:t.y/e||1}},O.add=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},O.addScalar=function(t,e){return{x:t.x+e,y:t.y+e}},O.subtract=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},O.subtractScalar=function(t,e){return{x:t.x+e,y:t.y+e}},O.multiply=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},O.multiplyScalar=function(t,e){return{x:t.x+e,y:t.y+e}},O.divide=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},O.divideScalar=function(t,e){return{x:t.x+e,y:t.y+e}},O.transformMat2=function(t,e){return{x:e[0]*t.x+e[2]*t.y,y:e[1]*t.x+e[3]*t.y}},O.transformMat3=function(t,e){return{x:e[0]*t.x+e[3]*t.y+e[6],y:e[1]*t.x+e[4]*t.y+e[7]}},O.negate=function(t){return{x:-1*t.x,y:-1*t.y}},O.invert=function(t){return{x:1/t.x,y:1/t.y}},O.maxMagnitude=function(t,e){return O.setMagnitude(t,Math.max(O.getMagnitude(t),e))},O.minMagnitude=function(t,e){return O.setMagnitude(t,Math.min(O.getMagnitude(t),e))},O.clampMagnitude=function(t,e,n){return O.setMagnitude(t,s(O.getMagnitude(t),{min:e,max:n}))},O.isZero=function(t,e=Number.EPSILON){return Math.abs(t.x)<e&&Math.abs(t.y)<e},O.isNan=function(t){return isNaN(t.x)||isNaN(t.y)},O.equals=function(t,e,n=Number.EPSILON){return Math.abs(t.x-e.x)<=n&&Math.abs(t.y-e.y)<=n},n(481),(P=T||(T={})).chunk=function(t,e){if(e<0)throw Error("Invalid chunk size");let n=[];for(let r=0;r<t.length;r+=e){let i=t.slice(r,r+e);n.push(i)}return n},P.pickRandom=function(t){let e=t.length;if(e<=0)throw Error("Invalid array size");return t[Math.floor(Math.random()*e)]},P.equals=function(t,e){return t.length==e.length&&t.every((t,n)=>t==e[n])};class u{_data;constructor(t){this._data=t}get data(){return this._data}get determinant(){return u.determinant(this._data)}getRow(t){let e=2*t;return[this._data[e],this._data[e+1]]}getColumn(t){return[this._data[t],this._data[t+2]]}equals(t){return u.equals(this._data,t)}clone(){return new u(this._data.slice())}toString(){let[t,e,n,r]=this._data;return`Mat2x2(
      ${t}, ${e},
      ${n}, ${r},
    )`}static zero(){return new u([0,0,0,0])}static identity(){return new u([1,0,0,1])}static rotation(t){let e=Math.cos(t),n=Math.sin(t);return new u([e,-n,n,e])}static scaling({x:t,y:e}){return new u([t,0,0,e])}static from(t){return new u(t.slice())}setRow(t,e){let n=2*t;this._data[n]=e[0],this._data[n+1]=e[1]}setColumn(t,e){this._data[t]=e[0],this._data[t+2]=e[1]}transpose(){let t=this._data[1];return this._data[1]=this._data[2],this._data[2]=t,this}add(t){return this._data[0]+=t[0],this._data[1]+=t[1],this._data[2]+=t[2],this._data[3]+=t[3],this}subtract(t){return this._data[0]-=t[0],this._data[1]-=t[1],this._data[2]-=t[2],this._data[3]-=t[3],this}invert(){let t=this.determinant;if(0===t)return null;t=1/t;let[e,n,r,i]=this._data;return this._data[0]=i*t,this._data[1]=-n*t,this._data[2]=-r*t,this._data[3]=e*t,this}multiply(t){let[e,n,r,i]=this._data,[s,o,a,u]=t;return this._data[0]=e*s+n*a,this._data[1]=e*o+n*u,this._data[2]=r*s+i*a,this._data[3]=r*o+i*u,this}multiplyScalar(t){let[e,n,r,i]=this._data;return this._data[0]=e*t,this._data[1]=n*t,this._data[2]=r*t,this._data[3]=i*t,this}rotate(t){let[e,n,r,i]=this._data,s=Math.sin(t),o=Math.cos(t);return this._data[0]=e*o+r*s,this._data[1]=n*o+i*s,this._data[2]=-(e*s)+r*o,this._data[3]=-(n*s)+i*o,this}scale(t){return this._data[0]*=t.x,this._data[1]*=t.x,this._data[2]*=t.y,this._data[3]*=t.y,this}copy(t){return this._data=t.slice(),this}}var c,h,l,d,f,y,p,g,x,m,v,w,S,b,M,_=u||(u={});function E(t){let[e,n,r,i]=t;return e*i-n*r}_.determinant=E,_.transpose=function(t){let[e,n,r,i]=t;return[e,r,n,i]},_.adjoint=function(t){let[e,n,r,i]=t;return[i,-n,-r,e]},_.inverse=function(t){let e=E(t);if(0===e)return null;let[n,r,i,s]=t;return[s*(e=1/e),-r*e,-i*e,n*e]},_.add=function(t,e){let[n,r,i,s]=t,[o,a,u,c]=e;return[n+o,r+a,i+u,s+c]},_.subtract=function(t,e){let[n,r,i,s]=t,[o,a,u,c]=e;return[n-o,r-a,i-u,s-c]},_.multiply=function(t,e){let[n,r,i,s]=t,[o,a,u,c]=e;return[n*o+r*u,n*a+r*c,i*o+s*u,i*a+s*c]},_.multiplyScalar=function(t,e){let[n,r,i,s]=t;return[n*e,r*e,i*e,s*e]},_.rotate=function(t,e){let[n,r,i,s]=t,o=Math.sin(e),a=Math.cos(e);return[n*a+r*o,-(n*o)+r*a,i*a+s*o,-(i*o)+s*a]},_.scale=function(t,{x:e,y:n}){let[r,i,s,o]=t;return[r*e,i*n,s*e,o*n]},_.equals=function(t,e){return T.equals(t,e)};class N{_data;constructor(t){this._data=t}get data(){return this._data}get determinant(){return N.determinant(this._data)}getRow(t){let e=3*t;return[this._data[e],this._data[e+1],this._data[e+2]]}getColumn(t){return[this._data[t],this._data[t+3],this._data[t+6]]}equals(t){return N.equals(this._data,t)}clone(){return new N(this._data.slice())}toString(){let t=this._data;return`Mat3x3(
      ${t[0]}, ${t[1]}, ${t[2]},
      ${t[3]}, ${t[4]}, ${t[5]},
      ${t[6]}, ${t[7]}, ${t[8]},
    )`}static identity(){return new N([1,0,0,0,1,0,0,0,1])}static translation({x:t,y:e}){return new N([1,0,0,0,1,0,t,e,1])}static rotation(t){let e=Math.cos(t),n=Math.sin(t);return new N([e,n,0,-n,e,0,0,0,1])}static scaling({x:t,y:e}){return new N([t,0,0,0,e,0,0,0,1])}static projection({width:t,height:e}){return new N([2/t,0,0,0,-2/e,0,-1,1,1])}static shearing({x:t,y:e}){return new N([1,e,0,t,1,0,0,0,1])}static reflection({h:t,v:e}){return new N([t?-1:1,0,0,0,e?-1:1,0,0,0,1])}static orthographic(t,e,n,r){let i=e-t,s=r-n;return new N([2/i,0,0,0,-2/s,0,-(e+t)/i,-(r+n)/s,1])}static from(t){return new N(t.slice())}setRow(t,e){let n=3*t;this._data[n]=e[0],this._data[n+1]=e[1],this._data[n+2]=e[2]}setColumn(t,e){this._data[t]=e[0],this._data[t+3]=e[1],this._data[t+6]=e[2]}transpose(){let t=this._data[1],e=this._data[2],n=this._data[5];return this._data[1]=this._data[3],this._data[2]=this._data[6],this._data[3]=t,this._data[5]=this._data[7],this._data[6]=e,this._data[7]=n,this}invert(){let[t,e,n,r,i,s,o,a,u]=this._data,c=t*(u*i-s*a)+e*(-u*r+s*o)+n*(a*r-i*o);if(!c)return null;let h=1/c;return this._data[0]=(u*i-s*a)*h,this._data[1]=(-u*e+n*a)*h,this._data[2]=(s*e-n*i)*h,this._data[3]=(-u*r+s*o)*h,this._data[4]=(u*t-n*o)*h,this._data[5]=(-s*t+n*r)*h,this._data[6]=(a*r-i*o)*h,this._data[7]=(-a*t+e*o)*h,this._data[8]=(i*t-e*r)*h,this}add(t){return this._data[0]+=t[0],this._data[1]+=t[1],this._data[2]+=t[2],this._data[3]+=t[3],this._data[4]+=t[4],this._data[5]+=t[5],this._data[6]+=t[6],this._data[7]+=t[7],this._data[8]+=t[8],this}subtract(t){return this._data[0]-=t[0],this._data[1]-=t[1],this._data[2]-=t[2],this._data[3]-=t[3],this._data[4]-=t[4],this._data[5]-=t[5],this._data[6]-=t[6],this._data[7]-=t[7],this._data[8]-=t[8],this}multiply(t){let[e,n,r,i,s,o,a,u,c]=this._data,[h,l,d,f,y,p,g,x,m]=t;return this._data[0]=h*e+l*i+d*a,this._data[1]=h*n+l*s+d*u,this._data[2]=h*r+l*o+d*c,this._data[3]=f*e+y*i+p*a,this._data[4]=f*n+y*s+p*u,this._data[5]=f*r+y*o+p*c,this._data[6]=g*e+x*i+m*a,this._data[7]=g*n+x*s+m*u,this._data[8]=g*r+x*o+m*c,this}multiplyScalar(t){return this._data[0]*=t,this._data[1]*=t,this._data[2]*=t,this._data[3]*=t,this._data[4]*=t,this._data[5]*=t,this._data[6]*=t,this._data[7]*=t,this._data[8]*=t,this}translate(t){let[e,n,r,i,s,o,a,u,c]=this._data;return this._data[6]=t.x*e+t.y*i+a,this._data[7]=t.x*n+t.y*s+u,this._data[8]=t.x*r+t.y*o+c,this}rotate(t){let[e,n,r,i,s,o]=this._data,a=Math.sin(t),u=Math.cos(t);return this._data[0]=u*e+a*i,this._data[1]=u*n+a*s,this._data[2]=u*r+a*o,this._data[3]=u*i-a*e,this._data[4]=u*s-a*n,this._data[5]=u*o-a*r,this}scale(t){return this._data[0]*=t.x,this._data[1]*=t.x,this._data[2]*=t.x,this._data[3]*=t.y,this._data[4]*=t.y,this._data[5]*=t.y,this}copy(t){return this._data=t.slice(),this}}!function(t){function e(t,e,n){return[t[(e+1)%3*3+(n+1)%3],t[(e+1)%3*3+(n+2)%3],t[(e+2)%3*3+(n+1)%3],t[(e+2)%3*3+(n+2)%3]]}function n(t){return Array.from({length:9},(n,r)=>{let i=e(t,Math.floor(r/3),r%3);return(r%2==0?1:-1)*u.determinant(i)})}function r(t){return[t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]]}t.minor=e,t.determinant=function(t){let[e,n,r,i,s,o,a,u,c]=t;return e*(c*s-o*u)+n*(-c*i+o*a)+r*(u*i-s*a)},t.cofactor=n,t.adjugate=function(t){return r(n(t))},t.transpose=r,t.inverse=function(t){let[e,n,r,i,s,o,a,u,c]=t,h=e*(c*s-o*u)+n*(-c*i+o*a)+r*(u*i-s*a);if(!h)return null;let l=1/h;return[(c*s-o*u)*l,(-c*n+r*u)*l,(o*n-r*s)*l,(-c*i+o*a)*l,(c*e-r*a)*l,(-o*e+r*i)*l,(u*i-s*a)*l,(-u*e+n*a)*l,(s*e-n*i)*l]},t.add=function(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2],t[3]+e[3],t[4]+e[4],t[5]+e[5],t[6]+e[6],t[7]+e[7],t[8]+e[8]]},t.subtract=function(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2],t[3]-e[3],t[4]-e[4],t[5]-e[5],t[6]-e[6],t[7]-e[7],t[8]-e[8]]},t.multiply=function(t,e){let[n,r,i,s,o,a,u,c,h]=t,[l,d,f,y,p,g,x,m,v]=e;return[l*n+d*s+f*u,l*r+d*o+f*c,l*i+d*a+f*h,y*n+p*s+g*u,y*r+p*o+g*c,y*i+p*a+g*h,x*n+m*s+v*u,x*r+m*o+v*c,x*i+m*a+v*h]},t.multiplyScalar=function(t,e){return[t[0]*e,t[1]*e,t[2]*e,t[3]*e,t[4]*e,t[5]*e,t[6]*e,t[7]*e,t[8]*e]},t.translate=function(t,e){let[n,r,i,s,o,a,u,c,h]=t,{x:l,y:d}=e;return[n,r,i,s,o,a,l*n+d*s+u,l*r+d*o+c,l*i+d*a+h]},t.rotate=function(t,e){let[n,r,i,s,o,a,u,c,h]=t,l=Math.sin(e),d=Math.cos(e);return[d*n+l*s,d*r+l*o,d*i+l*a,d*s-l*n,d*o-l*r,d*a-l*i,u,c,h]},t.scale=function(t,e){let{x:n,y:r}=e;return[n*t[0],n*t[1],n*t[2],r*t[3],r*t[4],r*t[5],t[6],t[7],t[8]]},t.shear=function(t,e){let[n,r,i,s,o,a,u,c,h]=t,{x:l,y:d}=e;return[n+l*s,r+l*o,i+l*a,d*n+s,d*r+o,d*i+a,u,c,h]},t.equals=function(t,e){return T.equals(t,e)}}(N||(N={}));var I,O,P,R,T,C,z,A,L,F,q,G,D,k,B,j,U,K,$=((R={})[R.OPTIONAL=0]="OPTIONAL",R[R.NONE=1]="NONE",R[R.SINGLE=2]="SINGLE",R[R.VARYING=3]="VARYING",R);c=C||(C={}),r=0,c.next=function(){return r++},c.fromComponent=function(t){let e=t.constructor,n=e.id;if(void 0===n)throw Error(`Given component of type '${e.name}' does not have a component constructor.`);return n};class H{position;rotation;scale;static id=C.next();constructor(t=new o(0,0),e=0,n=new a(1,1)){this.position=t,this.rotation=e,this.scale=n}get matrix(){let t=Math.sin(this.rotation),e=Math.cos(this.rotation);return N.from([this.scale.x*e,this.scale.x*t,0,-this.scale.y*t,this.scale.y*e,0,this.position.x,this.position.y,1])}translate(t){this.position.x+=t.x,this.position.y+=t.y}rescale(t){this.scale.x*=t.x,this.scale.y*=t.y}rotate(t){this.rotation=(this.rotation+t)%(2*Math.PI)}}class V{content;position;size;static id=C.next();flipX;flipY;constructor(t,e,n){this.content=t,this.position=e,this.size=n,this.flipX=!1,this.flipY=!1}}class Z{collider;static id=C.next();constructor(t){this.collider=t}}class W{value;static id=C.next();constructor(t=0){this.value=t}}n(3479),(h=z||(z={})).fromDescriptor=function(t){return Object.values(t).reduce((t,e)=>h.addConstraint(t,e.type.id,e.constraint),0n)},h.addConstraint=function(t,e,n){return t|BigInt(n)<<2n*BigInt(e)},h.getConstraint=function(t,e){return Number(t>>2n*BigInt(e)&3n)},h.matches=function(t,e){let n=0;for(;0n!==t;){let r=Number(3n&t);if(r===$.NONE&&e.includes(n)||r===$.SINGLE&&!e.includes(n))return!1;t>>=2n,n++}return!0};class Y{descriptor;static ALL=new Y({});id;getDescriptor(){return this.descriptor}constructor(t){this.descriptor=t,this.id=z.fromDescriptor(t)}static create(){return new Y({})}static from(t){return new Y(Object.assign({},t.getDescriptor()))}static pickFrom(t,...e){let n=t.getDescriptor(),r={};for(let t of e)r[t]=n[t];return new Y(r)}static omitFrom(t,...e){let n=Object.assign({},t.getDescriptor());for(let t of e)delete n[t];return new Y(n)}none(t,e){return this.descriptor[t]={type:e,constraint:$.NONE},this.id=z.addConstraint(this.id,e.id,$.NONE),this}single(t,e){return this.descriptor[t]={type:e,constraint:$.SINGLE},this.id=z.addConstraint(this.id,e.id,$.SINGLE),this}varying(t,e){return this.descriptor[t]={type:e,constraint:$.VARYING},this.id=z.addConstraint(this.id,e.id,$.VARYING),this}optional(t,e){return this.descriptor[t]={type:e,constraint:$.OPTIONAL},this.id=z.addConstraint(this.id,e.id,$.OPTIONAL),this}}class X{descriptor;constructor(t){this.descriptor=t}none(t,e){return new X({...this.descriptor,[t]:{type:e,constraint:$.NONE}})}single(t,e){return new X({...this.descriptor,[t]:{type:e,constraint:$.SINGLE}})}varying(t,e){return new X({...this.descriptor,[t]:{type:e,constraint:$.VARYING}})}optional(t,e){return new X({...this.descriptor,[t]:{type:e,constraint:$.OPTIONAL}})}build(){return new Q(this.descriptor)}}class Q{descriptor;id;getDescriptor(){return this.descriptor}constructor(t){this.descriptor=t,this.id=z.fromDescriptor(t)}static builder(){return new X({})}}let J=Q.builder().single("transform",H).optional("drawable",V).optional("collidable",Z).optional("zIndex",W).build();n(3293);class tt{x;y;radius;constructor(t,e,n){this.x=t,this.y=e,this.radius=n}get center(){return new o(this.x,this.y)}static from(t){return new tt(t.x,t.y,t.radius)}getClosestPoint(t){return tt.getClosestPoint(this,t)}containsPoint(t){return tt.containsPoint(this,t)}containsRect(t){return tt.containsRect(this,t)}containsCircle(t){return tt.containsCircle(this,t)}containsLine(t){return tt.containsLine(this,t)}overlapsRect(t){return tt.overlapsRect(this,t)}overlapsCircle(t){return tt.overlapsCircle(this,t)}overlapsLine(t){return tt.overlapsLine(this,t)}intersectRect(t){return tt.intersectRect(this,t)}intersectCircle(t){return tt.intersectCircle(this,t)}getRectIntersectionPoints(t){return tt.getRectIntersectionPoints(this,t)}getCircleIntersectionPoints(t){return tt.getCircleIntersectionPoints(this,t)}getLineIntersectionPoints(t){return tt.getLineIntersectionPoints(this,t)}getBoundingRect(){return tt.getBoundingRect(this)}equals(t,e=Number.EPSILON){return tt.equals(this,t,e)}copy(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}clone(){return new tt(this.x,this.y,this.radius)}toString(){let t=this.x.toFixed(1),e=this.y.toFixed(1),n=this.radius.toFixed(1);return`Circle(x:${t}, y:${e}, r:${n})`}}(l=tt||(tt={})).getClosestPoint=function(t,e){let n=a.direction(e,t).normalize().multiplyScalar(t.radius);return o.from(t).add(n)},l.containsPoint=function(t,e){return o.distanceBetweenSquared(t,e)<=Math.pow(t.radius,2)},l.containsRect=function(t,e){return Math.pow(Math.max(t.x-e.x,e.x+e.width-t.x),2)+Math.pow(Math.max(t.y-e.y,e.y+e.height-t.y),2)<=Math.pow(t.radius,2)},l.containsCircle=function(t,e){let n=o.distanceBetweenSquared(t,e);return n+Math.pow(e.radius,2)<=Math.pow(t.radius,2)},l.containsLine=function(t,e){return l.containsPoint(t,e.start)&&l.containsPoint(t,e.end)},l.overlapsRect=function(t,e){return tn.overlapsCircle(e,t)},l.overlapsCircle=function(t,e){return o.distanceBetweenSquared(t,e)<=Math.pow(t.radius+e.radius,2)},l.overlapsLine=function(t,e){let n=e.end.x-e.start.x,r=e.end.y-e.start.y,i=e.start.x-t.x,s=e.start.y-t.y,o=2*(i*n+s*r);return o*o-4*(n*n+r*r)*(i*i+s*s-t.radius*t.radius)>=0},l.intersectRect=function(t,e){return tn.intersectRect(e,l.getBoundingRect(t))},l.intersectCircle=function(t,e){return l.overlapsCircle(t,e)?tn.intersectRect(l.getBoundingRect(t),l.getBoundingRect(e)):l.containsCircle(t,e)?l.getBoundingRect(e):l.containsCircle(e,t)?l.getBoundingRect(t):null},l.getRectIntersectionPoints=function(t,e){return tn.getCircleIntersectionPoints(e,t)},l.getCircleIntersectionPoints=function(t,e){let n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));if(i>t.radius+e.radius||i<Math.abs(t.radius-e.radius))return[];let s=(Math.pow(t.radius,2)-Math.pow(e.radius,2)+Math.pow(i,2))/(2*i),a={x:t.x+n*s/i,y:t.y+r*s/i},u=Math.sqrt(Math.pow(t.radius,2)-Math.pow(s,2)),c={x:-(u/i*r),y:u/i*n};return[o.from(a).add(c),o.from(a).subtract(c)]},l.getLineIntersectionPoints=function(t,e){let n=e.end.x-e.start.x,r=e.end.y-e.start.y,i=e.start.x-t.x,s=e.start.y-t.y,a=n*n+r*r,u=2*(i*n+s*r),c=u*u-4*a*(i*i+s*s-t.radius*t.radius);if(c<0)return[];let h=(-u+Math.sqrt(c))/(2*a),l=(-u-Math.sqrt(c))/(2*a),d=[];return h>=0&&h<=1&&d.push(new o(e.start.x+h*n,e.start.y+h*r)),l>=0&&l<=1&&d.push(new o(e.start.x+l*n,e.start.y+l*r)),d},l.getBoundingRect=function(t){let e=2*t.radius;return new tn(t.x-t.radius,t.y-t.radius,e,e)},l.equals=function(t,e,n=Number.EPSILON){return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n&&Math.abs(t.radius-e.radius)<n};class te{start;end;constructor(t,e){this.start=t,this.end=e}static from(t){return new te(o.from(t.start),o.from(t.end))}getClosestPoint(t){return te.getClosestPoint(this,t)}overlapsRect(t){return te.overlapsRect(this,t)}overlapsCircle(t){return te.overlapsCircle(this,t)}overlapsLine(t){return te.overlapsLine(this,t)}getRectIntersectionPoints(t){return te.getRectIntersectionPoints(this,t)}getCircleIntersectionPoints(t){return te.getCircleIntersectionPoints(this,t)}getLineIntersectionPoints(t){return te.getLineIntersectionPoints(this,t)}getBoundingRect(){return te.getBoundingRect(this)}equals(t,e=Number.EPSILON){return te.equals(this,t,e)}copy(t){return this.start.x=t.start.x,this.start.y=t.start.y,this.end.x=t.end.x,this.end.y=t.end.y,this}clone(){return new te(this.start,this.end)}toString(){let t=this.start.x.toFixed(1),e=this.start.y.toFixed(1),n=this.end.x.toFixed(1),r=this.end.y.toFixed(1);return`Line2(sx:${t}, sy:${e}, ex:${n}, ey:${r})`}}(d=te||(te={})).getClosestPoint=function(t,e){let n=a.direction(t.start,t.end),r=a.direction(t.start,e),i=n.magnitudeSquared;if(0===i)return o.from(t.start);let u=s(a.dot(r,n)/i,{min:0,max:1});return new o(t.start.x+u*n.x,t.start.y+u*n.y)},d.overlapsRect=function(t,e){return tn.overlapsLine(e,t)},d.overlapsCircle=function(t,e){return tt.overlapsLine(e,t)},d.overlapsLine=function(t,e){let n=(e.end.y-e.start.y)*(t.end.x-t.start.x)-(e.end.x-e.start.x)*(t.end.y-t.start.y);if(0===n)return!1;let r=((e.end.x-e.start.x)*(t.start.y-e.start.y)-(e.end.y-e.start.y)*(t.start.x-e.start.x))/n,i=((t.end.x-t.start.x)*(t.start.y-e.start.y)-(t.end.y-t.start.y)*(t.start.x-e.start.x))/n;return!(r<0||r>1||i<0||i>1)},d.getRectIntersectionPoints=function(t,e){return tn.getLineIntersectionPoints(e,t)},d.getCircleIntersectionPoints=function(t,e){return tt.getLineIntersectionPoints(e,t)},d.getLineIntersectionPoints=function(t,e){let n=(e.end.y-e.start.y)*(t.end.x-t.start.x)-(e.end.x-e.start.x)*(t.end.y-t.start.y);if(0===n)return[];let r=((e.end.x-e.start.x)*(t.start.y-e.start.y)-(e.end.y-e.start.y)*(t.start.x-e.start.x))/n,i=((t.end.x-t.start.x)*(t.start.y-e.start.y)-(t.end.y-t.start.y)*(t.start.x-e.start.x))/n;return r<0||r>1||i<0||i>1?[]:[new o(t.start.x+r*(t.end.x-t.start.x),t.start.y+r*(t.end.y-t.start.y))]},d.getBoundingRect=function(t){let e=Math.min(t.start.x,t.end.x),n=Math.max(t.start.x,t.end.x),r=Math.min(t.start.y,t.end.y),i=Math.max(t.start.y,t.end.y);return new tn(n,i,n-e,i-r)},d.equals=function(t,e,n=Number.EPSILON){return Math.abs(t.start.x-e.start.x)<n&&Math.abs(t.start.y-e.start.y)<n&&Math.abs(t.end.x-e.end.x)<n&&Math.abs(t.end.y-e.end.y)<n};class tn{x;y;width;height;constructor(t,e,n,r){this.x=t,this.y=e,this.width=n,this.height=r}get center(){return tn.getCenter(this)}get left(){return tn.getLeft(this)}get right(){return tn.getRight(this)}get top(){return tn.getTop(this)}get bottom(){return tn.getBottom(this)}get topLeft(){return tn.getTopLeft(this)}get topRight(){return tn.getTopRight(this)}get bottomLeft(){return tn.getBottomLeft(this)}get bottomRight(){return tn.getBottomRight(this)}get corners(){return tn.getCorners(this)}get edges(){return tn.getEdges(this)}static from(t){return new tn(t.x,t.y,t.width,t.height)}getClosestPoint(t){return tn.getClosestPoint(this,t)}containsPoint(t){return tn.containsPoint(this,t)}containsRect(t){return tn.containsRect(this,t)}containsCircle(t){return tn.containsCircle(this,t)}containsLine(t){return tn.containsLine(this,t)}overlapsRect(t){return tn.overlapsRect(this,t)}overlapsCircle(t){return tn.overlapsCircle(this,t)}overlapsLine(t){return tn.overlapsLine(this,t)}intersectRect(t){return tn.intersectRect(this,t)}intersectCircle(t){return tn.intersectCircle(this,t)}getRectIntersectionPoints(t){return tn.getRectIntersectionPoints(this,t)}getCircleIntersectionPoints(t){return tn.getCircleIntersectionPoints(this,t)}getLineIntersectionPoints(t){return tn.getLineIntersectionPoints(this,t)}getBoundingRect(){return tn.getBoundingRect(this)}equals(t,e=Number.EPSILON){return tn.equals(this,t,e)}copy(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}clone(){return new tn(this.x,this.y,this.width,this.height)}toString(){let t=this.x.toFixed(1),e=this.y.toFixed(1),n=this.width.toFixed(1),r=this.height.toFixed(1);return`Rect(x:${t}, y:${e}, w:${n}, h:${r})`}}(f=tn||(tn={})).getCenter=function(t){return new o(t.x+t.width/2,t.y+t.height/2)},f.getLeft=function(t){return t.x},f.getRight=function(t){return t.x+t.width},f.getTop=function(t){return t.y},f.getBottom=function(t){return t.y+t.height},f.getTopLeft=function(t){return new o(t.x,t.y)},f.getTopRight=function(t){return new o(t.x+t.width,t.y)},f.getBottomLeft=function(t){return new o(t.x,t.y+t.height)},f.getBottomRight=function(t){return new o(t.x+t.width,t.y+t.height)},f.getCorners=function(t){return[f.getTopLeft(t),f.getTopRight(t),f.getBottomRight(t),f.getBottomLeft(t)]},f.getEdges=function(t){let e=f.getCorners(t);return[new te(e[0],e[1]),new te(e[1],e[2]),new te(e[2],e[3]),new te(e[3],e[0])]},f.getClosestPoint=function(t,e){let n=o.from(e),r=t.x,i=t.y,a=r+t.width,u=i+t.height;if(f.containsPoint(t,e)){let t=r-n.x,e=i-n.y,s=a-n.x,o=u-n.y,c=Math.min(Math.min(t,s),Math.min(e,o));return c===t?n.x=r:c===s&&(n.x=a),c===e?n.y=i:c===o&&(n.y=u),n}return n.x=s(e.x,{min:r,max:a}),n.y=s(e.y,{min:i,max:u}),n},f.containsPoint=function(t,e){return t.x<=e.x&&t.x+t.width>=e.x&&t.y<=e.y&&t.y+t.height>=e.y},f.containsRect=function(t,e){return t.x<=e.x&&t.x+t.width>=e.x+e.width&&t.y<=e.y&&t.y+t.height>=e.y+e.height},f.containsCircle=function(t,e){if(!f.containsPoint(t,e))return!1;let n=f.getClosestPoint(t,e).distanceToSquared(e);return Math.pow(e.radius,2)<=n},f.containsLine=function(t,e){return f.containsPoint(t,e.start)&&f.containsPoint(t,e.end)},f.overlapsRect=function(t,e){return t.x+t.width>=e.x&&t.x<=e.x+e.width&&t.y+t.height>=e.y&&t.y<=e.y+e.height},f.overlapsCircle=function(t,e){if(f.containsPoint(t,e))return!0;let n=f.getClosestPoint(t,e);return tt.containsPoint(e,n)},f.overlapsLine=function(t,e){return f.containsLine(t,e)||f.getEdges(t).some(e=>f.getLineIntersectionPoints(t,e))},f.intersectCircle=function(t,e){return f.intersectRect(t,tt.getBoundingRect(e))},f.intersectRect=function(t,e){let n=Math.max(t.x,e.x),r=Math.min(t.x+t.width,e.x+e.width),i=Math.max(t.y,e.y),s=Math.min(t.y+t.height,e.y+e.height),o=r-n,a=s-i;return o<=0||a<=0?null:new f(n,i,o,a)},f.getRectIntersectionPoints=function(t,e){if(!f.overlapsRect(t,e))return[];let n=f.getEdges(t),r=f.getEdges(e),i=[];for(let t of n)for(let e of r){let n=te.getLineIntersectionPoints(t,e);n.length>0&&i.push(...n)}return i},f.getCircleIntersectionPoints=function(t,e){let n=f.getEdges(t),r=[];for(let t of n){let n=te.getCircleIntersectionPoints(t,e);n&&r.push(...n)}return r},f.getLineIntersectionPoints=function(t,e){throw Error("Not implemented")},f.getBoundingRect=function(t){return f.from(t)},f.equals=function(t,e,n=Number.EPSILON){return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n&&Math.abs(t.x+t.width-e.x+e.width)<n&&Math.abs(t.y+t.height-e.y+e.height)<n};var tr=((y={})[y.NO_CHANGE=0]="NO_CHANGE",y[y.CHANGE_WIDTH_TO_FIT_CANVAS=1]="CHANGE_WIDTH_TO_FIT_CANVAS",y[y.CHANGE_HEIGHT_TO_FIT_CANVAS=2]="CHANGE_HEIGHT_TO_FIT_CANVAS",y[y.CHANGE_SHORTEST_SIDE_TO_FIT_CANVAS=3]="CHANGE_SHORTEST_SIDE_TO_FIT_CANVAS",y[y.CHANGE_LONGEST_SIDE_TO_FIT_CANVAS=4]="CHANGE_LONGEST_SIDE_TO_FIT_CANVAS",y[y.CHANGE_LENGTH_TO_FIT_CANVAS=5]="CHANGE_LENGTH_TO_FIT_CANVAS",y);class ti{mode;safeZone;static id=C.next();constructor(t,e){this.mode=t,this.safeZone=e}static worldToScreen(t,e){let n=N.inverse(t);return n?o.transformMat3(e,n):o.ORIGIN}static screenToWorld(t,e){return o.transformMat3(e,t)}getMatrix(t,e){let n=this.getZoomLevel(e),r=t.scale.x/n,i=t.scale.y/n,s=Math.cos(t.rotation),o=Math.sin(t.rotation);return N.from([r*s,r*o,0,-i*o,i*s,0,t.position.x,t.position.y,1])}getViewMatrix(t,e){return this.getMatrix(t,e).invert()??N.identity()}isPointInView(t,e,n){let r=this.getMatrix(t,n).data,i=ti.worldToScreen(r,e);return tn.containsPoint({x:-n.width/2,y:-n.height/2,width:n.width,height:n.height},i)}isRectInView(t,e,n){let r={x:-n.width/2,y:-n.height/2,width:n.width,height:n.height},i=this.getMatrix(t,n).data,s=ti.worldToScreen(i,tn.getTopLeft(e));if(tn.containsPoint(r,s))return!0;let o=ti.worldToScreen(i,tn.getTopRight(e));if(tn.containsPoint(r,o))return!0;let a=ti.worldToScreen(i,tn.getBottomRight(e));if(tn.containsPoint(r,a))return!0;let u=ti.worldToScreen(i,tn.getBottomLeft(e));return tn.containsPoint(r,u)}getZoomLevel(t){switch(this.mode){case 0:return 1;case 1:return t.width/this.safeZone.width;case 2:return t.height/this.safeZone.height;case 3:return Math.min(t.width/this.safeZone.width,t.height/this.safeZone.height);case 4:return Math.max(t.width/this.safeZone.width,t.height/this.safeZone.height);case 5:return Math.sqrt(a.getMagnitudeSquared({x:t.width,y:t.height})/a.getMagnitudeSquared({x:this.safeZone.width,y:this.safeZone.height}))}}}class ts{x;y;z;static ZERO=ts.zero();constructor(t,e,n){this.x=t,this.y=e,this.z=n}get magnitude(){return ts.getMagnitude(this)}set magnitude(t){ts.setMagnitude(this,t)}get magnitudeSquared(){return ts.getMagnitudeSquared(this)}static zero(){return new ts(0,0,0)}static direction(t,e){return ts.from(e).subtract(t)}static from(t){return new ts(t.x??0,t.y??0,t.z??0)}dot(t){return ts.dot(this,t)}cross(t){return ts.from(ts.cross(this,t))}normalize(){let t=this.magnitude;return this.x=this.x/t||1,this.y=this.y/t||1,this.z=this.z/t||1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subtractScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.x/=t,this.y/=t,this.z/=t,this}transformMat3(t){let{x:e,y:n,z:r}=this;return this.x=e*t[0]+n*t[3]+r*t[6],this.y=e*t[1]+n*t[4]+r*t[7],this.z=e*t[2]+n*t[5]+r*t[8],this}negate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}invert(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this}maxMagnitude(t){return this.magnitude=Math.max(this.magnitude,t),this}minMagnitude(t){return this.magnitude=Math.min(this.magnitude,t),this}clampMagnitude(t,e){return this.magnitude=s(this.magnitude,{min:t,max:e}),this}isZero(t=Number.EPSILON){return ts.isZero(this,t)}isNan(){return ts.isNan(this)}equals(t,e=Number.EPSILON){return ts.equals(this,t,e)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}clone(){return new ts(this.x,this.y,this.z)}toPoint(){return to.from(this)}toString(){let t=this.x.toFixed(1),e=this.y.toFixed(1),n=this.z.toFixed(1);return`Vec3(x:${t}, y:${e}, z:${n})`}}(p=ts||(ts={})).getMagnitude=function(t){return Math.sqrt(p.getMagnitudeSquared(t))},p.setMagnitude=function(t,e){let n=p.getMagnitude(t);return{x:t.x/n*e,y:t.y/n*e,z:t.z/n*e}},p.getMagnitudeSquared=function(t){return Math.pow(t.x,2)+Math.pow(t.y,2)+Math.pow(t.z,2)},p.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},p.cross=function(t,e){return{x:t.y*e.z-t.z*e.y,y:t.z*e.x-t.x*e.z,z:t.x*e.y-t.y*e.x}},p.normalize=function(t){let e=p.getMagnitude(t);return{x:t.x/e||1,y:t.y/e||1,z:t.z/e||1}},p.add=function(t,e){return{x:t.x+e.x,y:t.y+e.y,z:t.z+e.z}},p.addScalar=function(t,e){return{x:t.x+e,y:t.y+e,z:t.z+e}},p.subtract=function(t,e){return{x:t.x-e.x,y:t.y-e.y,z:t.z-e.z}},p.subtractScalar=function(t,e){return{x:t.x-e,y:t.y-e,z:t.z-e}},p.multiply=function(t,e){return{x:t.x*e.x,y:t.y*e.y,z:t.z*e.z}},p.multiplyScalar=function(t,e){return{x:t.x*e,y:t.y*e,z:t.z*e}},p.divide=function(t,e){return{x:t.x/e.x,y:t.y/e.y,z:t.z/e.z}},p.divideScalar=function(t,e){return{x:t.x/e,y:t.y/e,z:t.z/e}},p.transformMat3=function(t,e){return{x:e[0]+t.y*e[3]+t.z*e[6],y:e[1]+t.y*e[4]+t.z*e[7],z:e[2]+t.y*e[5]+t.z*e[8]}},p.negate=function(t){return{x:-1*t.x,y:-1*t.y,z:-1*t.z}},p.invert=function(t){return{x:1/t.x,y:1/t.y,z:1/t.z}},p.maxMagnitude=function(t,e){return p.setMagnitude(t,Math.max(p.getMagnitude(t),e))},p.minMagnitude=function(t,e){return p.setMagnitude(t,Math.min(p.getMagnitude(t),e))},p.clampMagnitude=function(t,e,n){return p.setMagnitude(t,s(p.getMagnitude(t),{min:e,max:n}))},p.isZero=function(t,e=Number.EPSILON){return Math.abs(t.x)<e&&Math.abs(t.y)<e&&Math.abs(t.z)<e},p.isNan=function(t){return isNaN(t.x)||isNaN(t.y)||isNaN(t.z)},p.equals=function(t,e,n=Number.EPSILON){return Math.abs(t.x-e.x)<=n&&Math.abs(t.y-e.y)<=n&&Math.abs(t.z-e.z)<=n};class to{x;y;z;static ORIGIN=to.zero();constructor(t,e,n){this.x=t,this.y=e,this.z=n}static zero(){return new to(0,0,0)}static midpoint(t,e){return new to((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2)}static from(t){return new to(t.x??0,t.y??0,t.z??0)}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subtractScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.x/=t,this.y/=t,this.z/=t,this}transformMat3(t){let{x:e,y:n,z:r}=this;return this.x=e*t[0]+n*t[3]+r*t[6],this.y=e*t[1]+n*t[4]+r*t[7],this.z=e*t[2]+n*t[5]+r*t[8],this}directionTo(t){return ts.direction(this,t)}distanceTo(t){return to.distanceBetween(this,t)}distanceToSquared(t){return to.distanceBetweenSquared(this,t)}isZero(t=Number.EPSILON){return to.isZero(this,t)}isNan(){return to.isNan(this)}equals(t,e=Number.EPSILON){return to.equals(this,t,e)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}clone(){return new to(this.x,this.y,this.z)}toVec(){return ts.from(this)}toString(){let t=this.x.toFixed(1),e=this.y.toFixed(1),n=this.z.toFixed(1);return`Pnt3(x:${t}, y:${e}, z:${n})`}}(g=to||(to={})).add=function(t,e){return{x:t.x+e.x,y:t.y+e.y,z:t.z+e.z}},g.addScalar=function(t,e){return{x:t.x+e,y:t.y+e,z:t.z+e}},g.subtract=function(t,e){return{x:t.x-e.x,y:t.y-e.y,z:t.z-e.z}},g.subtractScalar=function(t,e){return{x:t.x-e,y:t.y-e,z:t.z-e}},g.multiply=function(t,e){return{x:t.x*e.x,y:t.y*e.y,z:t.z*e.z}},g.multiplyScalar=function(t,e){return{x:t.x*e,y:t.y*e,z:t.z*e}},g.divide=function(t,e){return{x:t.x/e.x,y:t.y/e.y,z:t.z/e.z}},g.divideScalar=function(t,e){return{x:t.x/e,y:t.y/e,z:t.z/e}},g.transformMat3=function(t,e){return{x:e[0]+t.y*e[3]+t.z*e[6],y:e[1]+t.y*e[4]+t.z*e[7],z:e[2]+t.y*e[5]+t.z*e[8]}},g.distanceBetween=function(t,e){return Math.sqrt(g.distanceBetweenSquared(t,e))},g.distanceBetweenSquared=function(t,e){let n=t.x-e.x;return Math.pow(n,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2)},g.isZero=function(t,e=Number.EPSILON){return Math.abs(t.x)<e&&Math.abs(t.y)<e&&Math.abs(t.z)<e},g.isNan=function(t){return isNaN(t.x)||isNaN(t.y)||isNaN(t.z)},g.equals=function(t,e,n=Number.EPSILON){return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n&&Math.abs(t.z-e.z)<n};class ta{target;static id=C.next();offset;constructor(t){this.target=t,this.offset=to.zero()}}let tu=Q.builder().single("transform",H).single("camera",ti).optional("attached",ta).build();class tc{width;height;constructor(t,e){this.width=t,this.height=e}static from(t){return new tc(t.width,t.height)}static isZero(t,e=Number.EPSILON){return t.width<=e&&t.height<=e}static isNan(t){return isNaN(t.width)||isNaN(t.height)}static equals(t,e,n=Number.EPSILON){return Math.abs(t.width-e.width)<=n&&Math.abs(t.height-e.height)<=n}static copy(t,e){t.width=e.width,t.height=e.height}static clone(t){return{width:t.width,height:t.height}}static toString(t){let e=t.width.toFixed(1),n=t.height.toFixed(1);return`Dim2(w:${e}, h:${n})`}isZero(t=Number.EPSILON){return tc.isZero(this,t)}isNan(){return tc.isNan(this)}equals(t,e=Number.EPSILON){return tc.equals(this,t,e)}copy(t){return tc.copy(this,t),this}clone(){return new tc(this.width,this.height)}toString(){return tc.toString(this)}}class th{context;tileMap;tileSet;tiles;constructor(t,e,n){this.context=t,this.tileMap=e,this.tileSet=n,this.tiles=[]}update({entities:t},e){let n=this.context,r=t.queryFirstEntity(tu);for(let e of this.tiles){let i=t.getFirstComponent(e,V),s=t.getFirstComponent(e,H);r&&i&&s&&(r.camera.isRectInView(r.transform,{x:s.position.x,y:s.position.y,width:128,height:128},n.canvas)||(t.getFirstComponent(e,Z)?t.removeComponent(e,i):t.deleteEntity(e)))}for(let e=0;e<this.tileMap.height;e++)for(let i=0;i<this.tileMap.width;i++){let s=this.tileMap.getTile("ground",{x:i,y:e});if(s){let a=this.tileSet.getTile(s.name);if(a){let s=new o(128*i,128*e);if(r&&!r.camera.isRectInView(r.transform,{x:s.x,y:s.y,width:128,height:128},n.canvas))continue;let u=this.tiles.find(e=>{let n=t.getFirstComponent(e,H);return n&&n.position.equals(s)});if(void 0!==u&&t.getFirstComponent(u,V))continue;let c=new V(a,o.zero(),new tc(128,128));if(void 0===u){let e=new H(s),n=t.createArchetype(J,{transform:e,drawable:c});this.tiles.push(n)}else t.addComponent(u,c)}}}}}var tl=((x={})[x.GROUNDED=0]="GROUNDED",x[x.AIRBORNE=1]="AIRBORNE",x[x.SUBMERGED=2]="SUBMERGED",x),td=((m={})[m.NORTH=0]="NORTH",m[m.EAST=1]="EAST",m[m.SOUTH=2]="SOUTH",m[m.WEST=3]="WEST",m),tf=((v={})[v.IDLE=0]="IDLE",v[v.WALKING=1]="WALKING",v[v.RUNNING=2]="RUNNING",v[v.JUMPING=3]="JUMPING",v[v.GLIDING=4]="GLIDING",v[v.FALLING=5]="FALLING",v);class ty{locationState;movementState;facingDirection;static id=C.next();constructor(t,e,n){this.locationState=t,this.movementState=e,this.facingDirection=n}}var tp=((w={}).IDLE="IDLE",w.WALKING="WALKING",w.RUNNING="RUNNING",w.JUMPING="JUMPING",w);class tg{frames;frameTimeSeconds;playing;currentTime;currentFrame;constructor(t,e=0){this.frames=t,this.frameTimeSeconds=e,this.playing=!0,this.currentTime=0,this.currentFrame=0}getFrame(){return this.frames[this.currentFrame]}tick(t){if(this.playing)for(this.currentTime+=t;this.currentTime>=this.frameTimeSeconds;)this.currentTime-=this.frameTimeSeconds,this.currentFrame=(this.currentFrame+1)%this.frames.length}resume(){this.playing=!0}pause(){this.playing=!1}stop(){this.playing=!1,this.reset()}reset(){this.currentFrame=0,this.currentTime=0}}class tx{animations;currentState;static id=C.next();speedModifier;constructor(t,e){this.animations=t,this.currentState=e,this.speedModifier=1}play(t){t!==this.currentState&&this.animations.hasOwnProperty(t)&&(this.reset(),this.currentState=t)}getImage(){return this.animations[this.currentState].getFrame()}tick(t){this.animations[this.currentState].tick(t*this.speedModifier)}resume(){this.animations[this.currentState].resume()}pause(){this.animations[this.currentState].pause()}stop(){this.animations[this.currentState].stop()}reset(){this.speedModifier=1,this.animations[this.currentState].reset()}}class tm{hpTotal;hpLeft;static id=C.next();constructor(t,e=t){this.hpTotal=t,this.hpLeft=e}}class tv{static id=C.next()}let tw=Q.builder().single("transform",H).single("character",ty).single("controlled",tv).single("collidable",Z).single("drawable",V).single("animated",tx).single("health",tm).optional("zIndex",W).build();(S=A||(A={})).ARROW_UP="ArrowUp",S.ARROW_DOWN="ArrowDown",S.ARROW_LEFT="ArrowLeft",S.ARROW_RIGHT="ArrowRight",S.MOUSE_LEFT="M1",S.MOUSE_RIGHT="M2",S.SHIFT="Shift",S.SPACE=" ",S.W="w",S.A="a",S.S="s",S.D="d",S.Q="q",S.E="e",S.X="x",S.Z="z",S.T="t",S.Y="y",S.NUM_1="1",S.NUM_2="2",S.NUM_3="3",S.NUM_4="4",S.NUM_5="5";class tS{context;resolutionScaling;constructor(t){this.context=t,this.resolutionScaling=window.devicePixelRatio??1}update({entities:t,inputs:e},n){let r=t.queryFirstEntity(tw),i=t.queryFirstEntity(tu);if(!r)return;let{transform:s,character:o,animated:u,drawable:c}=r,h=a.zero();switch(e.isKeyPressed(A.ARROW_LEFT)&&(h.x-=1,o.facingDirection=td.WEST),e.isKeyPressed(A.ARROW_RIGHT)&&(h.x+=1,o.facingDirection=td.EAST),e.isKeyPressed(A.ARROW_UP)&&(h.y-=1),e.isKeyPressed(A.ARROW_DOWN)&&(h.y+=1),h.normalize().multiplyScalar(300),o.facingDirection===td.WEST?c.flipX=!0:o.facingDirection===td.EAST&&(c.flipX=!1),h.isZero()?o.movementState=tf.IDLE:(e.isKeyPressed(A.SHIFT)?(h.multiplyScalar(2),o.movementState=tf.RUNNING):o.movementState=tf.WALKING,o.locationState===tl.GROUNDED&&e.isKeyPressed(A.SPACE)&&(o.movementState=tf.JUMPING)),o.movementState){case tf.IDLE:u.play(tp.IDLE);break;case tf.WALKING:u.play(tp.WALKING);break;case tf.RUNNING:u.play(tp.RUNNING);break;case tf.JUMPING:u.play(tp.JUMPING)}if(e.isKeyPressed(A.W)&&s.rescale({x:1+3*n,y:1+3*n}),e.isKeyPressed(A.S)&&s.rescale({x:1-3*n,y:1-3*n}),e.isKeyPressed(A.A)&&s.rotate(-3*n),e.isKeyPressed(A.D)&&s.rotate(3*n),i&&e.isKeyPressed(A.Q)&&i.transform.rotate(-3*n),i&&e.isKeyPressed(A.E)&&i.transform.rotate(3*n),i&&e.isKeyPressed(A.X)&&i.transform.rescale({x:1+3*n,y:1+3*n}),i&&e.isKeyPressed(A.Z)&&i.transform.rescale({x:1-3*n,y:1-3*n}),e.isKeyPressed(A.Y)){let{canvas:t}=this.context,{clientWidth:e,clientHeight:r}=t;this.resolutionScaling=Math.min(this.resolutionScaling+.6*n,1),t.width=Math.floor(e*this.resolutionScaling),t.height=Math.floor(r*this.resolutionScaling)}if(e.isKeyPressed(A.T)){let{canvas:t}=this.context,{clientWidth:e,clientHeight:r}=t;this.resolutionScaling=Math.max(this.resolutionScaling-.6*n,.05),t.width=Math.floor(e*this.resolutionScaling),t.height=Math.floor(r*this.resolutionScaling)}i&&(e.isKeyPressed(A.NUM_1)?i.camera.mode=tr.CHANGE_HEIGHT_TO_FIT_CANVAS:e.isKeyPressed(A.NUM_2)?i.camera.mode=tr.CHANGE_WIDTH_TO_FIT_CANVAS:e.isKeyPressed(A.NUM_3)?i.camera.mode=tr.CHANGE_SHORTEST_SIDE_TO_FIT_CANVAS:e.isKeyPressed(A.NUM_4)?i.camera.mode=tr.CHANGE_LONGEST_SIDE_TO_FIT_CANVAS:e.isKeyPressed(A.NUM_5)&&(i.camera.mode=tr.CHANGE_LENGTH_TO_FIT_CANVAS)),s.translate({x:h.x*n,y:h.y*n})}}class tb{mass;velocity;static id=C.next();constructor(t,e=a.zero()){this.mass=t,this.velocity=e}}class tM{update({entities:t},e){for(let n of t.queryAllEntities(Y.create().single("transform",H).single("physical",tb))){let{transform:{position:t},physical:r}=n,{velocity:i}=r;t.x+=i.x*e,t.y+=i.y*e}}}n(5646),L=Symbol.iterator;class t_{dense=[];sparse=[];get size(){return this.dense.length}static from(t){let e=new t_;for(let n=0;n<t.length;n++)e.push(t[n]);return e}get(t){let e=this.indexOf(t);return -1===e?null:this.dense[e].value}delete(t){let e=this.indexOf(t);if(-1===e)return!1;let n=this.dense.pop();return n.key!==e&&(this.dense[e]=n,this.sparse[n.key]=e),!0}push(t){let e=this.dense.push({key:this.sparse.length,value:t});return this.sparse.push(e-1),e}clear(){this.dense.splice(0)}includes(t){return this.indexOf(t)>-1}keyOf(t){let e=this.dense.find(e=>e.value===t);return void 0!==e?e.key:-1}forEach(t,e){this.dense.forEach(({value:e,key:n})=>t(e,n,this),e)}*[L](){for(let t of this.dense)yield t.value}indexOf(t){let e=this.sparse[t];return void 0!==e&&this.dense[e]?.key===t?e:-1}}F=Symbol.iterator;class tE{collisions=new t_;get size(){return this.collisions.size}add(t){this.collisions.push(t)}delete(t){let e=this.collisions.keyOf(t);e>-1||this.collisions.delete(e)}clear(){this.collisions.clear()}*[F](){for(let t of this.collisions)yield t}}n(4898),n(9929);let tN={capacity:4,maximumDepth:-1};class tI{bounds;config;functions;elements;children;constructor(t,e=tN,n){this.bounds=t,this.config=e,this.functions=n,this.elements=[],this.children=null}static forPoints(t,e=tN){return new tI(t,e,{contains:tn.containsPoint})}static forRects(t,e=tN){return new tI(t,e,{contains:tn.overlapsRect})}getElements(){return this.children?this.children.flatMap(t=>t.getElements()):this.elements}getChildren(){return this.children??[]}getNodes(){let t=[this];for(let e of this.getChildren())t.push(...e.getNodes());return t}getLeafNodes(){let t=[];for(let e of(this.isLeafNode()&&t.push(this),this.getChildren()))t.push(...e.getLeafNodes());return t}isLeafNode(){return null===this.children}contains(t){return!!this.functions.contains(this.bounds,t)&&(this.children?this.children.some(e=>e.contains(t)):this.elements.includes(t))}remove(t){if(!this.functions.contains(this.bounds,t))return!1;if(this.children){let e=this.children.reduce((e,n)=>e||n.remove(t),!1);return e&&this.children.every(t=>t.isEmpty())&&(this.children=null),e}let e=this.elements.indexOf(t);return e>-1&&(this.elements.splice(e,1),!0)}insert(t){return!!this.functions.contains(this.bounds,t)&&(this.children?this.children.reduce((e,n)=>n.insert(t)||e,!1):this.elements.length<this.config.capacity||0===this.config.maximumDepth?(this.elements.push(t),!0):((-1===this.config.maximumDepth||this.config.maximumDepth>0)&&this.divide(),!1))}query(t){return tn.overlapsRect(this.bounds,t)?this.children?this.children.flatMap(e=>e.query(t)):this.elements.filter(e=>this.functions.contains(t,e)):[]}clear(){this.elements=[],this.children=null}isEmpty(){return null===this.children&&0===this.elements.length}divide(){let t=-1===this.config.maximumDepth?-1:this.config.maximumDepth-1,e={...this.config,maximumDepth:t},n=this.bounds.x,r=this.bounds.y,i=this.bounds.width/2,s=this.bounds.height/2;for(let t of(this.children=[new tI({x:n+i,y:r,width:i,height:s},e,this.functions),new tI({x:n,y:r,width:i,height:s},e,this.functions),new tI({x:n,y:r+s,width:i,height:s},e,this.functions),new tI({x:n+i,y:r+s,width:i,height:s},e,this.functions)],this.elements.splice(0)))for(let e of this.children)e.insert(t)}}class tO{update({entities:t,resources:e},n){let r=t.queryAllEntities(Y.create().single("transform",H).single("collidable",Z)),i=e.getOrSet(tE,()=>new tE);i.clear();let s=tI.forRects({x:-1e4,y:-1e4,width:2e4,height:2e4});for(let t of r){let{transform:e,collidable:{collider:n}}=t,r=n.getBoundingRect();s.insert({...t,x:r.x+e.position.x,y:r.y+e.position.y,width:r.width,height:r.height})}for(let t of s.getLeafNodes()){let e=t.getElements();for(let t=0;t<e.length;t++){let n=e[t],{transform:r,collidable:{collider:s}}=n;for(let o=t+1;o<e.length;o++){let t=e[o],{transform:a,collidable:{collider:u}}=t;if(s instanceof tt&&u instanceof tt){let e=tt.from({x:s.x+r.position.x,y:s.y+r.position.y,radius:s.radius*r.scale.x}),o=tt.from({x:u.x+a.position.x,y:u.y+a.position.y,radius:u.radius*a.scale.x});tt.overlapsCircle(e,o)&&i.add({source:n.id,target:t.id})}else if(s instanceof tn&&u instanceof tn){let e=tn.from({x:s.x+r.position.x,y:s.y+r.position.y,width:s.width*r.scale.x,height:s.height*r.scale.y}),o=tn.from({x:u.x+a.position.x,y:u.y+a.position.y,width:u.width*a.scale.x,height:u.height*a.scale.y});tn.overlapsRect(e,o)&&i.add({source:n.id,target:t.id})}else if(s instanceof tt&&u instanceof tn){let e=tt.from({x:s.x+r.position.x,y:s.y+r.position.y,radius:s.radius*r.scale.x}),o=tn.from({x:u.x+a.position.x,y:u.y+a.position.y,width:u.width*a.scale.x,height:u.height*a.scale.y});tt.overlapsRect(e,o)&&i.add({source:n.id,target:t.id})}else if(s instanceof tn&&u instanceof tt){let e=tn.from({x:s.x+r.position.x,y:s.y+r.position.y,width:s.width*r.scale.x,height:s.height*r.scale.y}),o=tt.from({x:u.x+a.position.x,y:u.y+a.position.y,radius:u.radius*a.scale.x});tn.overlapsCircle(e,o)&&i.add({source:n.id,target:t.id})}}}}}}class tP{update({entities:t},e){for(let{transform:e,attached:n}of t.queryAllEntities(Y.create().single("transform",H).single("attached",ta))){let r=t.getFirstComponent(n.target,H);r&&e.position.copy(r.position)}}}class tR{update({entities:t},e){let n=Y.create().single("animated",tx).optional("drawable",V);for(let{animated:r,drawable:i}of t.queryAllEntities(n))r.tick(e),i&&(i.content=r.getImage())}}class tT{size;color;static id=C.next();constructor(t,e){this.size=t,this.color=e}}let tC=Q.builder().single("transform",H).single("rectangle",tT).optional("physical",tb).optional("collidable",Z).optional("zIndex",W).build();class tz{radius;color;static id=C.next();constructor(t,e){this.radius=t,this.color=e}}let tA=Q.builder().single("transform",H).single("circle",tz).optional("physical",tb).optional("collidable",Z).optional("zIndex",W).build();(q||(q={})).applyTransform=function(t,e){t.transform(e[0],e[1],e[3],e[4],e[6],e[7])};let tL=2*Math.PI;class tF{context;constructor(t){this.context=t}update({entities:t},e){let n=this.context,r=t.queryFirstEntity(tu);if(n.save(),n.translate(n.canvas.width/2,n.canvas.height/2),r){let t=r.camera.getViewMatrix(r.transform,n.canvas);q.applyTransform(n,t.data)}this.renderBoxes(t),this.renderBalls(t),n.restore()}renderBoxes(t){let e=this.context,n=t.queryFirstEntity(tu);for(let r of t.queryAllEntities(tC)){let{transform:t,rectangle:{size:i,color:s}}=r;if(n&&!n.camera.isRectInView(n.transform,{...t.position,...i},e.canvas))continue;e.save();let o=t.matrix;q.applyTransform(e,o.data),e.fillStyle=s.toRgbCssString(),e.fillRect(0,0,i.width,i.height),e.restore()}}renderBalls(t){let e=this.context,n=t.queryFirstEntity(tu);for(let r of t.queryAllEntities(tA)){let{transform:t,circle:{radius:i,color:s}}=r;if(n&&!n.camera.isRectInView(n.transform,{x:t.position.x-i,y:t.position.y-i,width:2*i,height:2*i},e.canvas))continue;e.save();let o=t.matrix;q.applyTransform(e,o.data),e.beginPath(),e.fillStyle=s.toRgbCssString(),e.arc(0,0,i,0,tL),e.fill(),e.restore()}}}let tq=Q.builder().single("transform",H).single("drawable",V).optional("zIndex",W).build();function tG(t,e){return t.zIndex&&e.zIndex?t.zIndex.value-e.zIndex.value:t.zIndex?1:e.zIndex?-1:0}class tD{context;constructor(t){this.context=t}update({entities:t},e){let n=this.context,r=t.queryFirstEntity(tu),i=t.queryAllEntities(tq).toSorted(tG);if(n.save(),n.translate(n.canvas.width/2,n.canvas.height/2),r){let t=r.camera.getViewMatrix(r.transform,n.canvas);q.applyTransform(n,t.data)}for(let t of i){let{transform:e,drawable:i}=t,{content:s,size:o,position:a,flipX:u,flipY:c}=i;if(r&&!r.camera.isRectInView(r.transform,{...e.position,...o},n.canvas))continue;n.save(),n.imageSmoothingEnabled=!1;let h=e.matrix;q.applyTransform(n,h.data),u&&n.scale(-1,1),c&&n.scale(1,-1),n.drawImage(s,a.x,a.y,o.width,o.height),n.restore()}n.restore()}}class tk{r;g;b;a;constructor(t,e,n,r=1){this.r=t,this.g=e,this.b=n,this.a=r}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}clone(){return new tk(this.r,this.g,this.b,this.a)}toRgbCssString(){return`rgb(${this.r} ${this.g} ${this.b} / ${100*this.a}%)`}toString(){return`Rgba(${this.r.toString(16)}${this.g.toString(16)}${this.b.toString(16)}${this.a.toString(16)})`}}let tB=2*Math.PI;class tj{context;static CAMERA_BOUNDS_COLOR=new tk(0,255,0,.8);constructor(t){this.context=t}update({entities:t},e){let n=this.context,r=t.queryAllEntities(tu),i=r.find(t=>!0);if(n.save(),i){let t=i.camera.getViewMatrix(i.transform,n.canvas);q.applyTransform(n,t.data)}for(let t of r){n.save();let e=t.transform.matrix;q.applyTransform(n,e.data),n.lineWidth=2,n.strokeStyle=tj.CAMERA_BOUNDS_COLOR.toRgbCssString(),n.strokeRect(0,0,t.camera.safeZone.width,t.camera.safeZone.height),n.beginPath(),n.moveTo(0,0),n.lineTo(t.camera.safeZone.width,t.camera.safeZone.height),n.stroke(),n.beginPath(),n.moveTo(0,t.camera.safeZone.height),n.lineTo(t.camera.safeZone.width,0),n.stroke(),n.restore()}n.restore()}}class tU{context;lengthModifier;constructor(t,e=1){this.context=t,this.lengthModifier=e}update({entities:t},e){let n=this.context,r=t.queryFirstEntity(tu),i=t.queryAllEntities(Y.create().single("transform",H).single("physical",tb));if(n.save(),n.translate(n.canvas.width/2,n.canvas.height/2),r){let t=r.camera.getViewMatrix(r.transform,n.canvas);q.applyTransform(n,t.data)}for(let t of i){let{transform:e,physical:{velocity:i}}=t;if(r&&!r.camera.isPointInView(r.transform,e.position,n.canvas))continue;n.save();let s=e.matrix;q.applyTransform(n,s.data),n.lineWidth=3,n.strokeStyle="black",n.lineCap="butt",n.beginPath(),n.moveTo(0,0),n.lineTo(i.x*this.lengthModifier,i.y*this.lengthModifier),n.stroke(),n.restore()}n.restore()}}class tK{context;static INTERSECTION_POINT_COLOR=new tk(255,0,0,.8);static INTERSECTION_BOX_COLOR=new tk(255,0,0,.4);constructor(t){this.context=t}update({entities:t},e){let n=this.context,r=t.queryFirstEntity(tu),i=t.queryAllEntities(Y.create().single("transform",H).single("collidable",Z));if(n.save(),n.translate(n.canvas.width/2,n.canvas.height/2),r){let t=r.camera.getViewMatrix(r.transform,n.canvas);q.applyTransform(n,t.data)}for(let t=0;t<i.length;t++){let{transform:e,collidable:{collider:n}}=i[t];for(let r=t+1;r<i.length;r++){let{transform:t,collidable:{collider:s}}=i[r];if(n instanceof tt&&s instanceof tt){let r=tt.from({x:n.x+e.position.x,y:n.y+e.position.y,radius:n.radius*e.scale.x}),i=tt.from({x:s.x+t.position.x,y:s.y+t.position.y,radius:s.radius*t.scale.x});for(let t of tt.getCircleIntersectionPoints(r,i))this.renderIntersectionPoint(t);let o=tt.intersectCircle(r,i);o&&this.renderCollisionBox(o)}else if(n instanceof tn&&s instanceof tn){let r=tn.from({x:n.x+e.position.x,y:n.y+e.position.y,width:n.width*e.scale.x,height:n.height*e.scale.y}),i=tn.from({x:s.x+t.position.x,y:s.y+t.position.y,width:s.width*t.scale.x,height:s.height*t.scale.y});for(let t of tn.getRectIntersectionPoints(r,i))this.renderIntersectionPoint(t);let o=tn.intersectRect(r,i);o&&this.renderCollisionBox(o)}else if(n instanceof tt&&s instanceof tn){let r=tt.from({x:n.x+e.position.x,y:n.y+e.position.y,radius:n.radius*e.scale.x}),i=tn.from({x:s.x+t.position.x,y:s.y+t.position.y,width:s.width*t.scale.x,height:s.height*t.scale.y});for(let t of tn.getCircleIntersectionPoints(i,r))this.renderIntersectionPoint(t);let o=tn.intersectRect(i,tt.getBoundingRect(r));o&&this.renderCollisionBox(o)}else if(n instanceof tn&&s instanceof tt){let r=tn.from({x:n.x+e.position.x,y:n.y+e.position.y,width:n.width*e.scale.x,height:n.height*e.scale.y}),i=tt.from({x:s.x+t.position.x,y:s.y+t.position.y,radius:s.radius*t.scale.x});for(let t of tn.getCircleIntersectionPoints(r,i))this.renderIntersectionPoint(t);let o=tn.intersectRect(r,tt.getBoundingRect(i));o&&this.renderCollisionBox(o)}}}n.restore()}handleCircleCircleCollision(){}handleRectRectCollision(){}handleCircleRectCollision(){}renderIntersectionPoint(t){let e=this.context;e.beginPath(),e.fillStyle=tK.INTERSECTION_POINT_COLOR.toRgbCssString(),e.arc(t.x,t.y,4,0,tB),e.fill()}renderCollisionBox(t){let e=this.context;e.beginPath(),e.fillStyle=tK.INTERSECTION_BOX_COLOR.toRgbCssString(),e.fillRect(t.x,t.y,t.width,t.height)}}class t${context;static STROKE_COLOR=new tk(128,0,128,.5);static FILL_COLOR=new tk(128,0,128,.2);constructor(t){this.context=t}update({entities:t},e){let n=this.context,r=t.queryFirstEntity(tu),i=t.queryAllEntities(Y.create().single("transform",H).single("collidable",Z));if(n.save(),n.translate(n.canvas.width/2,n.canvas.height/2),r){let t=r.camera.getViewMatrix(r.transform,n.canvas);q.applyTransform(n,t.data)}for(let t of i){let{transform:e,collidable:{collider:r}}=t;n.save();let i=e.matrix;q.applyTransform(n,i.data),r instanceof tt?(n.beginPath(),n.arc(r.x,r.y,r.radius,0,tB),n.fillStyle=t$.FILL_COLOR.toRgbCssString(),n.fill(),n.strokeStyle=t$.STROKE_COLOR.toRgbCssString(),n.stroke()):r instanceof tn&&(n.fillStyle=t$.FILL_COLOR.toRgbCssString(),n.fillRect(r.x,r.y,r.width,r.height),n.strokeStyle=t$.STROKE_COLOR.toRgbCssString(),n.strokeRect(r.x,r.y,r.width,r.height)),n.restore()}n.restore()}}n(9560);let tH=n.p+"static/image/TX Tileset Grass.c5d047c7.png";function tV(t){return new Promise((e,n)=>{let r=new Image;return r.onload=()=>e(r),r.onerror=t=>n(`Failed to load image: ${t}`),r.src=t,r})}class tZ{tiles;constructor(t){this.tiles=t}getTile(t){return this.tiles[t]??null}}n(4912),n(78),n(1416),n(9975),n(1998),n(8023),n(7527),n(4749),n(7881),n(9365),n(2592),n(1819),n(5614),n(7628),G=Symbol.iterator;class tW{name;tiles;constructor(t,e){this.name=t,this.tiles=e}getTile(t){return this.tiles[t.y]?.[t.x]??null}*[G](){for(let t of this.tiles)for(let e of t)null!=e&&(yield e)}}D=Symbol.iterator;class tY{width;height;layers;static DEFAULT_LAYER="__DEFAULT_LAYER";indices;constructor(t,e,n){this.width=t,this.height=e,this.layers=n,this.indices=new Map;for(let t=0;t<n.length;t++){let e=n[t];this.indices.set(e.name,t)}}static withSingleLayer(t){return new tY(t[0]?.length??0,t.length,[new tW(tY.DEFAULT_LAYER,t)])}getLayer(t){let e=this.indices.get(t);return void 0===e?null:this.layers[e]??null}getTile(t,e){let n=this.getLayer(t);return null===n?null:n.getTile(e)}getSection(t){throw Error("Not implemented")}getTiles(t){let e=[];for(let n of this.layers){let r=n.getTile(t);null!==r&&e.push(r)}return e}*[D](){for(let t of this.layers)for(let e of t)yield e}}async function tX(){let t=await tV(tH),e=await k.fromFixedGrid(t,{gridSize:{width:32,height:32}}),n=new tZ({a:e[3][0],b:e[3][1],c:e[3][2],d:e[3][3],e:e[3][4],f:e[3][5],g:e[3][6],h:e[3][7]}),r=[{name:"a"},{name:"b"},{name:"c"},{name:"d"},{name:"e"},{name:"f"},{name:"g"},{name:"h"}];return[new tY(32,16,[new tW("ground",Array(16).fill(null).map(()=>Array(32).fill(null).map(()=>T.pickRandom(r))))]),n]}(b=k||(k={})).fromPredefined=async function(t,e){let n=e.map(e=>createImageBitmap(t,e.x,e.y,e.width,e.height));return await Promise.all(n)},b.fromFixedGrid=async function(t,e){let{width:n,height:r}=t,{x:i,y:s}=e.gridOffset??o.ORIGIN,{width:a,height:u}=e.gridSize,{x:c,y:h}=e.gridSpacing??o.ORIGIN,l=Math.floor((n-i+c)/(a+c)),d=Math.floor((r-s+h)/(u+h)),f=[];for(let e=0;e<d;e++)for(let n=0;n<l;n++){let r=i+n*(a+c),o=s+e*(u+h);f.push(createImageBitmap(t,r,o,a,u))}let y=await Promise.all(f);return T.chunk(y,d)};let tQ=n.p+"static/image/cat-tilesheet.7bba9b5a.png";async function tJ(t){let e=await tV(tQ),n=await k.fromPredefined(e,[new tn(7,18,16,16),new tn(39,18,16,16),new tn(71,18,16,16),new tn(103,18,16,16),new tn(7,50,16,16),new tn(39,50,16,16),new tn(71,50,16,16),new tn(103,50,16,16),new tn(7,82,16,16),new tn(39,82,16,16),new tn(71,82,16,16),new tn(103,82,16,16),new tn(7,114,16,16),new tn(39,114,16,16),new tn(71,114,16,16),new tn(103,114,16,16)]),r=await k.fromPredefined(e,[new tn(7,146,16,16),new tn(39,146,16,16),new tn(71,146,16,16),new tn(103,146,16,16),new tn(135,146,16,16),new tn(167,146,16,16),new tn(199,146,16,16),new tn(231,146,16,16)]),i=await k.fromPredefined(e,[new tn(7,178,16,16),new tn(39,178,16,16),new tn(71,178,16,16),new tn(103,178,16,16),new tn(135,178,16,16),new tn(167,178,16,16),new tn(199,178,16,16),new tn(231,178,16,16)]),s=await k.fromPredefined(e,[new tn(7,274,16,16),new tn(39,274,16,16),new tn(71,274,16,16),new tn(103,274,16,16),new tn(135,274,16,16),new tn(167,274,16,16)]),a=t.createArchetype(tw,{transform:new H(new o(1e3,1e3)),character:new ty(tl.GROUNDED,tf.IDLE,td.EAST),controlled:new tv,collidable:new Z(new tn(-30,-30,60,60)),drawable:new V(n[0],new o(-32,-32),new tc(64,64)),animated:new tx({[tp.IDLE]:new tg(n,.15),[tp.WALKING]:new tg(r,.1),[tp.RUNNING]:new tg(i,.07),[tp.JUMPING]:new tg(s,.1)},tp.WALKING),zIndex:new W(3),health:new tm(9)});return t.createEntity([new H,new ta(a),new W(2)]),a}function t1(t,e,n,r){function i(t,e){return function(n){(function(t,e){if(t.v)throw Error("attempted to call "+e+" after decoration was finished")})(e,"addInitializer"),o(n,"An initializer"),t.push(n)}}function s(t,e,n,r,s,o,a,u,c){switch(s){case 1:h="accessor";break;case 2:h="method";break;case 3:h="getter";break;case 4:h="setter";break;default:h="field"}var h,l,d,f={kind:h,name:a?"#"+e:e,static:o,private:a,metadata:u},y={v:!1};f.addInitializer=i(r,y),0===s?a?(l=n.get,d=n.set):(l=function(){return this[e]},d=function(t){this[e]=t}):2===s?l=function(){return n.value}:((1===s||3===s)&&(l=function(){return n.get.call(this)}),(1===s||4===s)&&(d=function(t){n.set.call(this,t)})),f.access=l&&d?{get:l,set:d}:l?{get:l}:{set:d};try{return t(c,f)}finally{y.v=!0}}function o(t,e){if("function"!=typeof t)throw TypeError(e+" must be a function")}function a(t,e){var n=typeof e;if(1===t){if("object"!==n||null===e)throw TypeError("accessor decorators must return an object with get, set, or init properties or void 0");void 0!==e.get&&o(e.get,"accessor.get"),void 0!==e.set&&o(e.set,"accessor.set"),void 0!==e.init&&o(e.init,"accessor.init")}else if("function"!==n)throw TypeError((0===t?"field":10===t?"class":"method")+" decorators must return a function or void 0")}function u(t,e){e&&t.push(function(t){for(var n=0;n<e.length;n++)e[n].call(t);return t})}function c(t,e){return Object.defineProperty(t,Symbol.metadata||Symbol.for("Symbol.metadata"),{configurable:!0,enumerable:!0,value:e})}return(t1=function(t,e,n,r){if(void 0!==r)var o=r[Symbol.metadata||Symbol.for("Symbol.metadata")];var h=Object.create(void 0===o?null:o),l=function(t,e,n){for(var r=[],i=new Map,o=new Map,c=0;c<e.length;c++){var h,l,d,f,y=e[c];if(Array.isArray(y)){var p=y[1],g=y[2],x=y.length>3,m=p>=5;if(m?(d=t,p-=5,f=l=l||[]):(d=t.prototype,f=h=h||[]),0!==p&&!x){var v=m?o:i,w=v.get(g)||0;if(!0===w||3===w&&4!==p||4===w&&3!==p)throw Error("Attempted to decorate a public method/accessor that has the same name as a previously decorated public method/accessor. This is not currently supported by the decorators plugin. Property name was: "+g);!w&&p>2?v.set(g,p):v.set(g,!0)}!function(t,e,n,r,i,o,u,c,h){var l,d,f,y,p,g,x,m=n[0];if(u?l=0===i||1===i?{get:n[3],set:n[4]}:3===i?{get:n[3]}:4===i?{set:n[3]}:{value:n[3]}:0!==i&&(l=Object.getOwnPropertyDescriptor(e,r)),1===i?f={get:l.get,set:l.set}:2===i?f=l.value:3===i?f=l.get:4===i&&(f=l.set),"function"==typeof m)void 0!==(y=s(m,r,l,c,i,o,u,h,f))&&(a(i,y),0===i?d=y:1===i?(d=y.init,f={get:p=y.get||f.get,set:y.set||f.set}):f=y);else for(var v=m.length-1;v>=0;v--)void 0!==(y=s(m[v],r,l,c,i,o,u,h,f))&&(a(i,y),0===i?x=y:1===i?(x=y.init,f={get:p=y.get||f.get,set:y.set||f.set}):f=y,void 0!==x&&(void 0===d?d=x:"function"==typeof d?d=[d,x]:d.push(x)));if(0===i||1===i){if(void 0===d)d=function(t,e){return e};else if("function"!=typeof d){var w=d;d=function(t,e){for(var n=e,r=0;r<w.length;r++)n=w[r].call(t,n);return n}}else{var S=d;d=function(t,e){return S.call(t,e)}}t.push(d)}0!==i&&(1===i?(l.get=f.get,l.set=f.set):2===i?l.value=f:3===i?l.get=f:4===i&&(l.set=f),u?1===i?(t.push(function(t,e){return f.get.call(t,e)}),t.push(function(t,e){return f.set.call(t,e)})):2===i?t.push(f):t.push(function(t,e){return f.call(t,e)}):Object.defineProperty(e,r,l))}(r,d,y,g,p,m,x,f,n)}}return u(r,h),u(r,l),r}(t,e,h);return n.length||c(t,h),{e:l,get c(){return function(t,e,n){if(e.length>0){for(var r=[],s=t,o=t.name,u=e.length-1;u>=0;u--){var h={v:!1};try{var l=e[u](s,{kind:"class",name:o,addInitializer:i(r,h),metadata:n})}finally{h.v=!0}void 0!==l&&(a(10,l),s=l)}return[c(s,n),function(){for(var t=0;t<r.length;t++)r[t].call(s)}]}}(t,n,h)}}})(t,e,n,r)}function t0(t,e){let n=e.name;if(e.private)throw Error(`'bind@' cannot decorate private properties like ${n}.`);e.addInitializer(function(){this[n]=this[n].bind(this)})}class t2{resources=new Map;get(t){return this.resources.get(t)??null}getOrSet(t,e){let n=this.get(t);return null===n&&(n=e(),this.resources.set(t,n)),n}set(t){let e=t.constructor;this.resources.set(e,t)}setIfNotPresent(t){let e=t.constructor;this.getOrSet(e,()=>t)}delete(t){return this.resources.delete(t)}clear(){this.resources.clear()}}class t4{static{({e:[B]}=t1(this,[[t0,2,"handleMouseMove"],[t0,2,"handleMouseDown"],[t0,2,"handleMouseUp"],[t0,2,"handleKeyDown"],[t0,2,"handleKeyUp"]],[]))}mousePosition;pressedKeys;constructor(){B(this),this.mousePosition=o.zero(),this.pressedKeys=new Map,window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}getMousePosition(){return this.mousePosition}isKeyPressed(t){return this.pressedKeys.get(t)??!1}dispose(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)}handleMouseMove(t){this.mousePosition.x=t.x,this.mousePosition.y=t.y}handleMouseDown(t){1===t.buttons?this.pressedKeys.set("M1",!0):this.pressedKeys.set("M2",!0)}handleMouseUp(t){1===t.buttons?this.pressedKeys.set("M1",!1):this.pressedKeys.set("M2",!1)}handleKeyDown(t){this.pressedKeys.set(t.key,!0)}handleKeyUp(t){this.pressedKeys.set(t.key,!1)}}class t6{events=new Map;register(t,e){let n=this.events.get(t);return n?n.push(e):this.events.set(t,[e]),{unregister:()=>this.unregister(t,e)}}once(t,e){let n=this.events.get(t),r=n=>{e(n),this.unregister(t,r)};return n?n.push(r):this.events.set(t,[r]),{unregister:()=>this.unregister(t,r)}}unregister(t,e){let n=this.events.get(t);n&&this.events.set(t,n.filter(t=>t!==e))}emit(t){let e=this.events.get(t.constructor);if(e)for(let n of e)n(t)}}j=Symbol.iterator;class t3{data=[];get length(){return this.data.length}push(t,e=Number.MAX_VALUE){if(0===this.data.length||e===Number.MAX_VALUE)return void this.data.push([e,t]);for(let n=0;n<this.data.length;n++){if(n===this.data.length-1){this.data.push([e,t]);break}if(this.data[n][0]>e){this.data.splice(n,0,[e,t]);break}}}remove(t){let e=this.data.findIndex(([e,n])=>n===t);e>=0&&this.data.splice(e,1)}peek(){return this.data[0]?.[1]??null}pop(){return this.data.pop()?.[1]??null}isEmpty(){return 0===this.data.length}forEach(t,e){this.data.forEach(([e,n],r)=>t(n,r,this),e)}*[j](){for(let[t,e]of this.data)yield e}}class t7{scene;systems;constructor(t){this.scene=t,this.systems=new t3}getAll(){return this.systems}add(t,e){this.systems.push(t,e),t.init?.(this.scene)}remove(t){this.systems.remove(t)}}n(8558),n(7980),n(6236),n(2833),n(7906),n(2114),n(2613),n(874),n(2240),n(8675),n(6857),n(8137),n(6501),n(6834),n(1549),n(3485),M=U||(U={}),i=0,M.next=function(){return i++};class t5{componentsByEntity=new Map;entitiesByComponent=new Map;cachedQueries=new Map;get entityCount(){return this.componentsByEntity.size}createEntity(t){let e=U.next();if(this.componentsByEntity.set(e,new Map),t)for(let n of t)this.addComponent(e,n);return e}createArchetype(t,e){let n=this.createEntity(Object.values(e)),r=this.cachedQueries.get(t.id);return r?r.add(n):this.cachedQueries.set(t.id,new Set([n])),n}deleteEntity(t){for(let e of(this.componentsByEntity.delete(t),this.entitiesByComponent.values()))e.delete(t);for(let e of this.cachedQueries.values())e.delete(t)}addComponent(t,e){let n=C.fromComponent(e),r=this.entitiesByComponent.get(n);r?r.add(t):this.entitiesByComponent.set(n,new Set([t]));let i=this.componentsByEntity.get(t);if(!i)return;let s=i.get(n);s?s.push(e):i.set(n,[e]);let o=Array.from(i.keys());for(let[e,r]of this.cachedQueries.entries())r.has(t)?z.getConstraint(e,n)===$.NONE&&r.delete(t):z.matches(e,o)&&r.add(t)}removeComponent(t,e){let n=C.fromComponent(e);this.entitiesByComponent.get(n)?.delete(t);let r=this.componentsByEntity.get(t);r?.delete(n);let i=Array.from(r?.keys()??[]);for(let[e,r]of this.cachedQueries.entries())r.has(t)?z.getConstraint(e,n)===$.SINGLE&&r.delete(t):z.matches(e,i)&&r.add(t)}getFirstComponent(t,e){return this.componentsByEntity.get(t)?.get(e.id)?.[0]??null}getAllComponents(t,e){let n,r=this.componentsByEntity.get(t);return r?e?r.get(e.id)??[]:Array.from(r.values()??[]).flat():[]}getAllEntities(){return Array.from(this.componentsByEntity.keys())}queryFirstEntity(t){let e,n=this.cachedQueries.get(t.id);if(n)e=n.values().find(()=>!0)??null;else{let n=this.getAllMatchingEntities(t.id);this.cachedQueries.set(t.id,new Set(n)),e=n[0]??null}return null===e?null:this.constructEntity(e,t.getDescriptor())}queryAllEntities(t){let e,n=this.cachedQueries.get(t.id);return n?e=Array.from(n.values()):(e=this.getAllMatchingEntities(t.id),this.cachedQueries.set(t.id,new Set(e))),e.map(e=>this.constructEntity(e,t.getDescriptor()))}getAllMatchingEntities(t){return this.componentsByEntity.entries().reduce((e,[n,r])=>{let i=Array.from(r.keys());return z.matches(t,i)&&e.push(n),e},[])}constructEntity(t,e){let n={id:t};for(let[r,i]of Object.entries(e))switch(i.constraint){case $.VARYING:n[r]=this.getAllComponents(t,i.type);break;case $.OPTIONAL:n[r]=this.getFirstComponent(t,i.type);break;case $.SINGLE:if(n[r]=this.getFirstComponent(t,i.type),!n[r])throw Error(`Mandatory component '${r}' is missing in entity '${t}'.`);break;case $.NONE:throw Error(`Non-required component '${r}' is present in entity '${t}'.`);default:throw Error(`Unknown contraint: '${i.constraint}'.`)}return n}}class t8{entities=new t5;systems=new t7(this);resources=new t2;inputs=new t4;events=new t6;addBundle(t){t.init(this)}dispose(){this.inputs.dispose()}}class t9{decay;measurement;constructor(t=1){this.decay=t,this.measurement=0}get currentFps(){return this.measurement?1/this.measurement:0}tick(t){this.measurement?this.measurement=this.measurement*(1-this.decay)+t*this.decay:this.measurement=t}reset(){this.measurement=0}}class et{static{({e:[K]}=t1(this,[[t0,2,"update"]],[]))}static TARGET_DT=1/60;_scene=(K(this),new t8);fpsCounter=new t9(.5);running=!1;lastTimestamp=null;frame=null;get isRunning(){return this.running}get fps(){return this.fpsCounter.currentFps}get scene(){return this._scene}changeScene(t){this._scene.dispose(),this._scene=t}start(){this.running||(this.running=!0,this.frame=requestAnimationFrame(this.update))}stop(){this.running&&(this.running=!1,this.lastTimestamp=null,this.frame&&(cancelAnimationFrame(this.frame),this.frame=null),this.fpsCounter.reset())}update(){let t,e=performance.now();for(let n of(t=this.lastTimestamp?(e-this.lastTimestamp)/1e3:et.TARGET_DT,this.lastTimestamp=e,this.fpsCounter.tick(t),this._scene.systems.getAll()))n.update(this._scene,t);this.frame=requestAnimationFrame(this.update)}}let ee=window.devicePixelRatio??1;function en(t){let{clientWidth:e,clientHeight:n}=t;t.width=Math.floor(e*ee),t.height=Math.floor(n*ee)}async function er(){let t=document.getElementById("canvas");if(!t)throw Error("Canvas element not found :-(");let e=t.getContext("2d",{alpha:!1,desynchronized:!0});if(!e)throw Error("2D canvas is not supported :-(");let[n,r]=await tX(),i=new et,{scene:{systems:s,entities:u}}=i;s.add({update(t,n){let r=e.canvas;e.clearRect(0,0,r.width,r.height)}}),s.add(new tS(e)),s.add(new tM),s.add(new tP),s.add(new tO),s.add(new tR),s.add(new th(e,n,r)),s.add(new tD(e)),s.add(new tF(e)),s.add(new t$(e)),s.add(new tK(e)),s.add(new tU(e,.5)),s.add(new tj(e));let c=await tJ(u);var h=u,l=c;let d=h.getFirstComponent(l,H);h.createArchetype(tu,{transform:new H(d?.position?.clone()),camera:new ti(tr.CHANGE_HEIGHT_TO_FIT_CANVAS,new tc(1e3,600)),attached:new ta(l)});for(let t=0;t<100;t++)!function(t){let e=new H(new o(2e3*Math.random(),2e3*Math.random())),n=new a((1e3*Math.random()-500)*.2,(1e3*Math.random()-500)*.2),r=60*Math.random()+20,i=new tz(r,new tk(125,200,0,1)),s=new tb(10,n),u=new Z(new tt(0,0,r)),c=new W(1);t.createArchetype(tA,{transform:e,circle:i,physical:s,collidable:u,zIndex:c})}(u);for(let t=0;t<100;t++)!function(t){let e=new H(new o(2e3*Math.random(),2e3*Math.random())),n=new a((1e3*Math.random()-500)*.2,(1e3*Math.random()-500)*.2),r=new tc(80*Math.random()+20,80*Math.random()+20),i=new tT(r,new tk(0,0,255,1)),s=new tb(10,n),u=new Z(new tn(0,0,r.width,r.height)),c=new W(1);t.createArchetype(tC,{transform:e,rectangle:i,physical:s,collidable:u,zIndex:c})}(u);return window.addEventListener("visibilitychange",()=>{document.hidden?i.stop():!i.isRunning&&i.start()}),window.addEventListener("resize",()=>en(t)),en(t),i}},9549:function(){},3825:function(t,e,n){n.a(t,async function(t,e){try{n(9549);var r=n(432);try{(await (0,r.d)()).start()}catch(t){alert(t)}e()}catch(t){e(t)}},1)},5085:function(t,e,n){var r=n(9821),i=n(4263),s=TypeError;t.exports=function(t){if(r(t))return t;throw new s(i(t)+" is not a function")}},2760:function(t,e,n){var r=n(4692).has;t.exports=function(t){return r(t),t}},7791:function(t,e,n){var r=n(1718).has;t.exports=function(t){return r(t),t}},6539:function(t,e,n){var r=n(6840),i=String,s=TypeError;t.exports=function(t){if(r(t))return t;throw new s(i(t)+" is not an object")}},3355:function(t,e,n){var r=n(621),i=n(7732),s=n(555),o=function(t){return function(e,n,o){var a,u=r(e),c=s(u);if(0===c)return!t&&-1;var h=i(o,c);if(t&&n!=n){for(;c>h;)if((a=u[h++])!=a)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},3203:function(t,e,n){var r=n(7494),i=n(6539),s=n(1153),o=n(6780),a=n(6252),u=n(9904),c=n(4043),h=n(6451),l=n(972),d=n(7056),f=h("Promise"),y="AsyncFromSyncIterator",p=u.set,g=u.getterFor(y),x=function(t,e,n,r,i){var s=t.done;f.resolve(t.value).then(function(t){e(d(t,s))},function(t){if(!s&&i)try{c(r,"throw",t)}catch(e){t=e}n(t)})},m=function(t){t.type=y,p(this,t)};m.prototype=a(s(l),{next:function(){var t=g(this);return new f(function(e,n){x(i(r(t.next,t.iterator)),e,n,t.iterator,!0)})},return:function(){var t=g(this).iterator;return new f(function(e,n){var s=o(t,"return");if(void 0===s)return e(d(void 0,!0));x(i(r(s,t)),e,n,t)})}}),t.exports=m},1564:function(t,e,n){var r=n(7494),i=n(6451),s=n(6780);t.exports=function(t,e,n,o){try{var a=s(t,"return");if(a)return i("Promise").resolve(r(a,t)).then(function(){e(n)},function(t){o(t)})}catch(t){return o(t)}e(n)}},425:function(t,e,n){var r=n(7494),i=n(9090),s=n(6539),o=n(1153),a=n(2444),u=n(6252),c=n(8583),h=n(9904),l=n(6451),d=n(6780),f=n(972),y=n(7056),p=n(4043),g=l("Promise"),x=c("toStringTag"),m="AsyncIteratorHelper",v="WrapForValidAsyncIterator",w=h.set,S=function(t){var e=!t,n=h.getterFor(t?v:m),a=function(t){var r=i(function(){return n(t)}),s=r.error,o=r.value;return s||e&&o.done?{exit:!0,value:s?g.reject(o):g.resolve(y(void 0,!0))}:{exit:!1,value:o}};return u(o(f),{next:function(){var t=a(this),e=t.value;if(t.exit)return e;var n=i(function(){return s(e.nextHandler(g))}),r=n.error,o=n.value;return r&&(e.done=!0),r?g.reject(o):g.resolve(o)},return:function(){var e,n,o=a(this),u=o.value;if(o.exit)return u;u.done=!0;var c=u.iterator,h=i(function(){if(u.inner)try{p(u.inner.iterator,"normal")}catch(t){return p(c,"throw",t)}return d(c,"return")});return(e=n=h.value,h.error)?g.reject(n):void 0===e?g.resolve(y(void 0,!0)):(n=(h=i(function(){return r(e,c)})).value,h.error)?g.reject(n):t?g.resolve(n):g.resolve(n).then(function(t){return s(t),y(void 0,!0)})}})},b=S(!0),M=S(!1);a(M,x,"Async Iterator Helper"),t.exports=function(t,e){var n=function(n,r){r?(r.iterator=n.iterator,r.next=n.next):r=n,r.type=e?v:m,r.nextHandler=t,r.counter=0,r.done=!1,w(this,r)};return n.prototype=e?b:M,n}},4662:function(t,e,n){var r=n(7494),i=n(5085),s=n(6539),o=n(6840),a=n(6182),u=n(6451),c=n(4894),h=n(1564),l=function(t){var e=0===t,n=1===t,l=2===t,d=3===t;return function(t,f,y){s(t);var p=void 0!==f;(p||!e)&&i(f);var g=c(t),x=u("Promise"),m=g.iterator,v=g.next,w=0;return new x(function(t,i){var u=function(t){h(m,i,t,i)},c=function(){try{if(p)try{a(w)}catch(t){u(t)}x.resolve(s(r(v,m))).then(function(r){try{if(s(r).done)e?(y.length=w,t(y)):t(!d&&(l||void 0));else{var a=r.value;try{if(p){var g=f(a,w),v=function(r){if(n)c();else if(l)r?c():h(m,t,!1,i);else if(e)try{y[w++]=r,c()}catch(t){u(t)}else r?h(m,t,d||a,i):c()};o(g)?x.resolve(g).then(v,u):v(g)}else y[w++]=a,c()}catch(t){u(t)}}}catch(t){i(t)}},i)}catch(t){i(t)}};c()})}};t.exports={toArray:l(0),forEach:l(1),every:l(2),some:l(3),find:l(4)}},2314:function(t,e,n){var r=n(7494),i=n(5085),s=n(6539),o=n(6840),a=n(4894),u=n(425),c=n(7056),h=n(1564),l=u(function(t){var e=this,n=e.iterator,i=e.mapper;return new t(function(a,u){var l=function(t){e.done=!0,u(t)},d=function(t){h(n,l,t,l)};t.resolve(s(r(e.next,n))).then(function(n){try{if(s(n).done)e.done=!0,a(c(void 0,!0));else{var r=n.value;try{var u=i(r,e.counter++),h=function(t){a(c(t,!1))};o(u)?t.resolve(u).then(h,d):h(u)}catch(t){d(t)}}}catch(t){l(t)}},l)})});t.exports=function(t){return s(this),i(t),new l(a(this),{mapper:t})}},972:function(t,e,n){var r,i,s=n(456),o=n(2223),a=n(9821),u=n(1153),c=n(3424),h=n(453),l=n(8583),d=n(3294),f="USE_FUNCTION_CONSTRUCTOR",y=l("asyncIterator"),p=s.AsyncIterator,g=o.AsyncIteratorPrototype;if(g)r=g;else if(a(p))r=p.prototype;else if(o[f]||s[f])try{i=c(c(c(Function("return async function*(){}()")()))),c(i)===Object.prototype&&(r=i)}catch(t){}r?d&&(r=u(r)):r={},a(r[y])||h(r,y,function(){return this}),t.exports=r},2185:function(t,e,n){var r=n(2814),i=r({}.toString),s=r("".slice);t.exports=function(t){return s(i(t),8,-1)}},4074:function(t,e,n){var r=n(8149),i=n(9821),s=n(2185),o=n(8583)("toStringTag"),a=Object,u="Arguments"===s(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(t){}};t.exports=r?s:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=c(e=a(t),o))?n:u?s(e):"Object"===(r=s(e))&&i(e.callee)?"Arguments":r}},7130:function(t,e,n){var r=n(5848),i=n(7040),s=n(3895),o=n(8235);t.exports=function(t,e,n){for(var a=i(e),u=o.f,c=s.f,h=0;h<a.length;h++){var l=a[h];r(t,l)||n&&r(n,l)||u(t,l,c(e,l))}}},4276:function(t,e,n){t.exports=!n(1455)(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},7056:function(t){t.exports=function(t,e){return{value:t,done:e}}},2444:function(t,e,n){var r=n(1360),i=n(8235),s=n(8590);t.exports=r?function(t,e,n){return i.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},8590:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},453:function(t,e,n){var r=n(9821),i=n(8235),s=n(5470),o=n(8711);t.exports=function(t,e,n,a){a||(a={});var u=a.enumerable,c=void 0!==a.name?a.name:e;if(r(n)&&s(n,c,a),a.global)u?t[e]=n:o(e,n);else{try{a.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=n:i.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},6252:function(t,e,n){var r=n(453);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},8711:function(t,e,n){var r=n(456),i=Object.defineProperty;t.exports=function(t,e){try{i(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},1360:function(t,e,n){t.exports=!n(1455)(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},3837:function(t,e,n){var r=n(456),i=n(6840),s=r.document,o=i(s)&&i(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},6182:function(t){var e=TypeError;t.exports=function(t){if(t>0x1fffffffffffff)throw e("Maximum allowed index exceeded");return t}},6064:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7579:function(t,e,n){var r=n(456).navigator,i=r&&r.userAgent;t.exports=i?String(i):""},1033:function(t,e,n){var r,i,s=n(456),o=n(7579),a=s.process,u=s.Deno,c=a&&a.versions||u&&u.version,h=c&&c.v8;h&&(i=(r=h.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=+r[1]),t.exports=i},7341:function(t,e,n){var r=n(456),i=n(3895).f,s=n(2444),o=n(453),a=n(8711),u=n(7130),c=n(7653);t.exports=function(t,e){var n,h,l,d,f,y=t.target,p=t.global,g=t.stat;if(n=p?r:g?r[y]||a(y,{}):r[y]&&r[y].prototype)for(h in e){if(d=e[h],l=t.dontCallGetSet?(f=i(n,h))&&f.value:n[h],!c(p?h:y+(g?".":"#")+h,t.forced)&&void 0!==l){if(typeof d==typeof l)continue;u(d,l)}(t.sham||l&&l.sham)&&s(d,"sham",!0),o(n,h,d,t)}}},1455:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},7722:function(t,e,n){var r=n(1609),i=n(5085),s=n(5707),o=r(r.bind);t.exports=function(t,e){return i(t),void 0===e?t:s?o(t,e):function(){return t.apply(e,arguments)}}},5707:function(t,e,n){t.exports=!n(1455)(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},7494:function(t,e,n){var r=n(5707),i=Function.prototype.call;t.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},360:function(t,e,n){var r=n(1360),i=n(5848),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),u=a&&(!r||r&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:a&&"something"===(function(){}).name,CONFIGURABLE:u}},2756:function(t,e,n){var r=n(2814),i=n(5085);t.exports=function(t,e,n){try{return r(i(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}}},1609:function(t,e,n){var r=n(2185),i=n(2814);t.exports=function(t){if("Function"===r(t))return i(t)}},2814:function(t,e,n){var r=n(5707),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);t.exports=r?o:function(t){return function(){return s.apply(t,arguments)}}},1804:function(t,e,n){var r=n(7494),i=n(9821),s=n(6539),o=n(4894),a=n(4311),u=n(6780),c=n(8583),h=n(3203),l=c("asyncIterator");t.exports=function(t){var e,n=s(t),c=!0,d=u(n,l);return i(d)||(d=a(n),c=!1),void 0!==d?e=r(d,n):(e=n,c=!0),s(e),o(c?e:new h(o(e)))}},6451:function(t,e,n){var r=n(456),i=n(9821);t.exports=function(t,e){var n;return arguments.length<2?i(n=r[t])?n:void 0:r[t]&&r[t][e]}},4894:function(t){t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},4311:function(t,e,n){var r=n(4074),i=n(6780),s=n(9700),o=n(649),a=n(8583)("iterator");t.exports=function(t){if(!s(t))return i(t,a)||i(t,"@@iterator")||o[r(t)]}},269:function(t,e,n){var r=n(7494),i=n(5085),s=n(6539),o=n(4263),a=n(4311),u=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(i(n))return s(r(n,t));throw new u(o(t)+" is not iterable")}},6780:function(t,e,n){var r=n(5085),i=n(9700);t.exports=function(t,e){var n=t[e];return i(n)?void 0:r(n)}},7786:function(t,e,n){var r=n(5085),i=n(6539),s=n(7494),o=n(1573),a=n(4894),u="Invalid size",c=RangeError,h=TypeError,l=Math.max,d=function(t,e){this.set=t,this.size=l(e,0),this.has=r(t.has),this.keys=r(t.keys)};d.prototype={getIterator:function(){return a(i(s(this.keys,this.set)))},includes:function(t){return s(this.has,this.set,t)}},t.exports=function(t){i(t);var e=+t.size;if(e!=e)throw new h(u);var n=o(e);if(n<0)throw new c(u);return new d(t,n)}},456:function(t,e,n){var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},5848:function(t,e,n){var r=n(2814),i=n(7670),s=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(i(t),e)}},2793:function(t){t.exports={}},3322:function(t,e,n){t.exports=n(6451)("document","documentElement")},8980:function(t,e,n){var r=n(1360),i=n(1455),s=n(3837);t.exports=!r&&!i(function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},4677:function(t,e,n){var r=n(2814),i=n(1455),s=n(2185),o=Object,a=r("".split);t.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(t){return"String"===s(t)?a(t,""):o(t)}:o},5566:function(t,e,n){var r=n(2814),i=n(9821),s=n(2223),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},9904:function(t,e,n){var r,i,s,o=n(709),a=n(456),u=n(6840),c=n(2444),h=n(5848),l=n(2223),d=n(2566),f=n(2793),y="Object already initialized",p=a.TypeError,g=a.WeakMap;if(o||l.state){var x=l.state||(l.state=new g);x.get=x.get,x.has=x.has,x.set=x.set,r=function(t,e){if(x.has(t))throw new p(y);return e.facade=t,x.set(t,e),e},i=function(t){return x.get(t)||{}},s=function(t){return x.has(t)}}else{var m=d("state");f[m]=!0,r=function(t,e){if(h(t,m))throw new p(y);return e.facade=t,c(t,m,e),e},i=function(t){return h(t,m)?t[m]:{}},s=function(t){return h(t,m)}}t.exports={set:r,get:i,has:s,enforce:function(t){return s(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw new p("Incompatible receiver, "+t+" required");return n}}}},3497:function(t,e,n){var r=n(8583),i=n(649),s=r("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[s]===t)}},9821:function(t){var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},7653:function(t,e,n){var r=n(1455),i=n(9821),s=/#|\.prototype\./,o=function(t,e){var n=u[a(t)];return n===h||n!==c&&(i(e)?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},u=o.data={},c=o.NATIVE="N",h=o.POLYFILL="P";t.exports=o},3834:function(t,e,n){var r=n(4074),i=n(5848),s=n(9700),o=n(8583),a=n(649),u=o("iterator"),c=Object;t.exports=function(t){if(s(t))return!1;var e=c(t);return void 0!==e[u]||"@@iterator"in e||i(a,r(e))}},9700:function(t){t.exports=function(t){return null==t}},6840:function(t,e,n){var r=n(9821);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},3294:function(t){t.exports=!1},3139:function(t,e,n){var r=n(6451),i=n(9821),s=n(6711),o=n(6254),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return i(e)&&s(e.prototype,a(t))}},4180:function(t,e,n){var r=n(7494);t.exports=function(t,e,n){for(var i,s,o=n?t:t.iterator,a=t.next;!(i=r(a,o)).done;)if(void 0!==(s=e(i.value)))return s}},5249:function(t,e,n){var r=n(7722),i=n(7494),s=n(6539),o=n(4263),a=n(3497),u=n(555),c=n(6711),h=n(269),l=n(4311),d=n(4043),f=TypeError,y=function(t,e){this.stopped=t,this.result=e},p=y.prototype;t.exports=function(t,e,n){var g,x,m,v,w,S,b,M=n&&n.that,_=!!(n&&n.AS_ENTRIES),E=!!(n&&n.IS_RECORD),N=!!(n&&n.IS_ITERATOR),I=!!(n&&n.INTERRUPTED),O=r(e,M),P=function(t){return g&&d(g,"normal",t),new y(!0,t)},R=function(t){return _?(s(t),I?O(t[0],t[1],P):O(t[0],t[1])):I?O(t,P):O(t)};if(E)g=t.iterator;else if(N)g=t;else{if(!(x=l(t)))throw new f(o(t)+" is not iterable");if(a(x)){for(m=0,v=u(t);v>m;m++)if((w=R(t[m]))&&c(p,w))return w;return new y(!1)}g=h(t,x)}for(S=E?t.next:g.next;!(b=i(S,g)).done;){try{w=R(b.value)}catch(t){d(g,"throw",t)}if("object"==typeof w&&w&&c(p,w))return w}return new y(!1)}},4043:function(t,e,n){var r=n(7494),i=n(6539),s=n(6780);t.exports=function(t,e,n){var o,a;i(t);try{if(!(o=s(t,"return"))){if("throw"===e)throw n;return n}o=r(o,t)}catch(t){a=!0,o=t}if("throw"===e)throw n;if(a)throw o;return i(o),n}},649:function(t){t.exports={}},555:function(t,e,n){var r=n(3663);t.exports=function(t){return r(t.length)}},5470:function(t,e,n){var r=n(2814),i=n(1455),s=n(9821),o=n(5848),a=n(1360),u=n(360).CONFIGURABLE,c=n(5566),h=n(9904),l=h.enforce,d=h.get,f=String,y=Object.defineProperty,p=r("".slice),g=r("".replace),x=r([].join),m=a&&!i(function(){return 8!==y(function(){},"length",{value:8}).length}),v=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===p(f(e),0,7)&&(e="["+g(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!o(t,"name")||u&&t.name!==e)&&(a?y(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&o(n,"arity")&&t.length!==n.arity&&y(t,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&y(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=l(t);return o(r,"source")||(r.source=x(v,"string"==typeof e?e:"")),t};Function.prototype.toString=w(function(){return s(this)&&d(this).source||c(this)},"toString")},4692:function(t,e,n){var r=n(2814),i=Map.prototype;t.exports={Map:Map,set:r(i.set),get:r(i.get),has:r(i.has),remove:r(i.delete),proto:i}},4694:function(t,e,n){var r=n(2814),i=n(4180),s=n(4692),o=s.Map,a=s.proto,u=r(a.forEach),c=r(a.entries),h=c(new o).next;t.exports=function(t,e,n){return n?i({iterator:c(t),next:h},function(t){return e(t[1],t[0])}):u(t,e)}},6083:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?n:e)(r)}},1153:function(t,e,n){var r,i=n(6539),s=n(5242),o=n(6064),a=n(2793),u=n(3322),c=n(3837),h=n(2566),l="prototype",d="script",f=h("IE_PROTO"),y=function(){},p=function(t){return"<"+d+">"+t+"</"+d+">"},g=function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e},x=function(){var t,e=c("iframe");return e.style.display="none",u.appendChild(e),e.src=String("java"+d+":"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F},m=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}m="undefined"!=typeof document?document.domain&&r?g(r):x():g(r);for(var t=o.length;t--;)delete m[l][o[t]];return m()};a[f]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(y[l]=i(t),n=new y,y[l]=null,n[f]=t):n=m(),void 0===e?n:s.f(n,e)}},5242:function(t,e,n){var r=n(1360),i=n(7174),s=n(8235),o=n(6539),a=n(621),u=n(5387);e.f=r&&!i?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),i=u(e),c=i.length,h=0;c>h;)s.f(t,n=i[h++],r[n]);return t}},8235:function(t,e,n){var r=n(1360),i=n(8980),s=n(7174),o=n(6539),a=n(1051),u=TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,l="enumerable",d="configurable",f="writable";e.f=r?s?function(t,e,n){if(o(t),e=a(e),o(n),"function"==typeof t&&"prototype"===e&&"value"in n&&f in n&&!n[f]){var r=h(t,e);r&&r[f]&&(t[e]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:l in n?n[l]:r[l],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(o(t),e=a(e),o(n),i)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new u("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},3895:function(t,e,n){var r=n(1360),i=n(7494),s=n(322),o=n(8590),a=n(621),u=n(1051),c=n(5848),h=n(8980),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=u(e),h)try{return l(t,e)}catch(t){}if(c(t,e))return o(!i(s.f,t,e),t[e])}},5487:function(t,e,n){var r=n(4372),i=n(6064).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},4713:function(t,e){e.f=Object.getOwnPropertySymbols},3424:function(t,e,n){var r=n(5848),i=n(9821),s=n(7670),o=n(2566),a=n(4276),u=o("IE_PROTO"),c=Object,h=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=s(t);if(r(e,u))return e[u];var n=e.constructor;return i(n)&&e instanceof n?n.prototype:e instanceof c?h:null}},6711:function(t,e,n){t.exports=n(2814)({}.isPrototypeOf)},4372:function(t,e,n){var r=n(2814),i=n(5848),s=n(621),o=n(3355).indexOf,a=n(2793),u=r([].push);t.exports=function(t,e){var n,r=s(t),c=0,h=[];for(n in r)!i(a,n)&&i(r,n)&&u(h,n);for(;e.length>c;)i(r,n=e[c++])&&(~o(h,n)||u(h,n));return h}},5387:function(t,e,n){var r=n(4372),i=n(6064);t.exports=Object.keys||function(t){return r(t,i)}},322:function(t,e){var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor;e.f=r&&!n.call({1:2},1)?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},626:function(t,e,n){var r=n(7494),i=n(9821),s=n(6840),o=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&i(n=t.toString)&&!s(a=r(n,t))||i(n=t.valueOf)&&!s(a=r(n,t))||"string"!==e&&i(n=t.toString)&&!s(a=r(n,t)))return a;throw new o("Can't convert object to primitive value")}},7040:function(t,e,n){var r=n(6451),i=n(2814),s=n(5487),o=n(4713),a=n(6539),u=i([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=s.f(a(t)),n=o.f;return n?u(e,n(t)):e}},9090:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},6124:function(t,e,n){var r=n(9700),i=TypeError;t.exports=function(t){if(r(t))throw new i("Can't call method on "+t);return t}},8620:function(t){t.exports=function(t,e){return t===e||t!=t&&e!=e}},8507:function(t,e,n){var r=n(1718),i=n(6137),s=r.Set,o=r.add;t.exports=function(t){var e=new s;return i(t,function(t){o(e,t)}),e}},794:function(t,e,n){var r=n(7791),i=n(1718),s=n(8507),o=n(9698),a=n(7786),u=n(6137),c=n(4180),h=i.has,l=i.remove;t.exports=function(t){var e=r(this),n=a(t),i=s(e);return o(e)<=n.size?u(e,function(t){n.includes(t)&&l(i,t)}):c(n.getIterator(),function(t){h(e,t)&&l(i,t)}),i}},1718:function(t,e,n){var r=n(2814),i=Set.prototype;t.exports={Set:Set,add:r(i.add),has:r(i.has),remove:r(i.delete),proto:i}},5126:function(t,e,n){var r=n(7791),i=n(1718),s=n(9698),o=n(7786),a=n(6137),u=n(4180),c=i.Set,h=i.add,l=i.has;t.exports=function(t){var e=r(this),n=o(t),i=new c;return s(e)>n.size?u(n.getIterator(),function(t){l(e,t)&&h(i,t)}):a(e,function(t){n.includes(t)&&h(i,t)}),i}},2932:function(t,e,n){var r=n(7791),i=n(1718).has,s=n(9698),o=n(7786),a=n(6137),u=n(4180),c=n(4043);t.exports=function(t){var e=r(this),n=o(t);if(s(e)<=n.size)return!1!==a(e,function(t){if(n.includes(t))return!1},!0);var h=n.getIterator();return!1!==u(h,function(t){if(i(e,t))return c(h,"normal",!1)})}},5970:function(t,e,n){var r=n(7791),i=n(9698),s=n(6137),o=n(7786);t.exports=function(t){var e=r(this),n=o(t);return!(i(e)>n.size)&&!1!==s(e,function(t){if(!n.includes(t))return!1},!0)}},5267:function(t,e,n){var r=n(7791),i=n(1718).has,s=n(9698),o=n(7786),a=n(4180),u=n(4043);t.exports=function(t){var e=r(this),n=o(t);if(s(e)<n.size)return!1;var c=n.getIterator();return!1!==a(c,function(t){if(!i(e,t))return u(c,"normal",!1)})}},6137:function(t,e,n){var r=n(2814),i=n(4180),s=n(1718),o=s.Set,a=s.proto,u=r(a.forEach),c=r(a.keys),h=c(new o).next;t.exports=function(t,e,n){return n?i({iterator:c(t),next:h},e):u(t,e)}},9698:function(t,e,n){t.exports=n(2756)(n(1718).proto,"size","get")||function(t){return t.size}},8936:function(t,e,n){var r=n(7791),i=n(1718),s=n(8507),o=n(7786),a=n(4180),u=i.add,c=i.has,h=i.remove;t.exports=function(t){var e=r(this),n=o(t).getIterator(),i=s(e);return a(n,function(t){c(e,t)?h(i,t):u(i,t)}),i}},2688:function(t,e,n){var r=n(7791),i=n(1718).add,s=n(8507),o=n(7786),a=n(4180);t.exports=function(t){var e=r(this),n=o(t).getIterator(),u=s(e);return a(n,function(t){i(u,t)}),u}},2566:function(t,e,n){var r=n(9263),i=n(8508),s=r("keys");t.exports=function(t){return s[t]||(s[t]=i(t))}},2223:function(t,e,n){var r=n(3294),i=n(456),s=n(8711),o="__core-js_shared__",a=t.exports=i[o]||s(o,{});(a.versions||(a.versions=[])).push({version:"3.42.0",mode:r?"pure":"global",copyright:"\xa9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})},9263:function(t,e,n){var r=n(2223);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},5946:function(t,e,n){var r=n(1033),i=n(1455),s=n(456).String;t.exports=!!Object.getOwnPropertySymbols&&!i(function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41})},7732:function(t,e,n){var r=n(1573),i=Math.max,s=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):s(n,e)}},621:function(t,e,n){var r=n(4677),i=n(6124);t.exports=function(t){return r(i(t))}},1573:function(t,e,n){var r=n(6083);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},3663:function(t,e,n){var r=n(1573),i=Math.min;t.exports=function(t){var e=r(t);return e>0?i(e,0x1fffffffffffff):0}},7670:function(t,e,n){var r=n(6124),i=Object;t.exports=function(t){return i(r(t))}},7967:function(t,e,n){var r=n(7494),i=n(6840),s=n(3139),o=n(6780),a=n(626),u=n(8583),c=TypeError,h=u("toPrimitive");t.exports=function(t,e){if(!i(t)||s(t))return t;var n,u=o(t,h);if(u){if(void 0===e&&(e="default"),!i(n=r(u,t,e))||s(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},1051:function(t,e,n){var r=n(7967),i=n(3139);t.exports=function(t){var e=r(t,"string");return i(e)?e:e+""}},5010:function(t,e,n){var r=n(6451),i=n(9821),s=n(3834),o=n(6840),a=r("Set");t.exports=function(t){return o(t)&&"number"==typeof t.size&&i(t.has)&&i(t.keys)?t:s(t)?new a(t):t}},8149:function(t,e,n){var r=n(8583)("toStringTag"),i={};i[r]="z",t.exports="[object z]"===String(i)},3576:function(t,e,n){var r=n(4074),i=String;t.exports=function(t){if("Symbol"===r(t))throw TypeError("Cannot convert a Symbol value to a string");return i(t)}},4263:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},8508:function(t,e,n){var r=n(2814),i=0,s=Math.random(),o=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++i+s,36)}},6254:function(t,e,n){t.exports=n(5946)&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7174:function(t,e,n){var r=n(1360),i=n(1455);t.exports=r&&i(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},709:function(t,e,n){var r=n(456),i=n(9821),s=r.WeakMap;t.exports=i(s)&&/native code/.test(String(s))},8583:function(t,e,n){var r=n(456),i=n(9263),s=n(5848),o=n(8508),a=n(5946),u=n(6254),c=r.Symbol,h=i("wks"),l=u?c.for||c:c&&c.withoutSetter||o;t.exports=function(t){return s(h,t)||(h[t]=a&&s(c,t)?c[t]:l("Symbol."+t)),h[t]}},481:function(t,e,n){var r=n(7341),i=n(4662).every;r({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(t){return i(this,t)}})},9929:function(t,e,n){var r=n(7341),i=n(7494),s=n(5085),o=n(6539),a=n(6840),u=n(4894),c=n(425),h=n(7056),l=n(1564),d=c(function(t){var e=this,n=e.iterator,r=e.predicate;return new t(function(s,u){var c=function(t){e.done=!0,u(t)},d=function(t){l(n,c,t,c)},f=function(){try{t.resolve(o(i(e.next,n))).then(function(n){try{if(o(n).done)e.done=!0,s(h(void 0,!0));else{var i=n.value;try{var u=r(i,e.counter++),l=function(t){t?s(h(i,!1)):f()};a(u)?t.resolve(u).then(l,d):l(u)}catch(t){d(t)}}}catch(t){c(t)}},c)}catch(t){c(t)}};f()})});r({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(t){return o(this),s(t),new d(u(this),{predicate:t})}})},793:function(t,e,n){var r=n(7341),i=n(4662).find;r({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(t){return i(this,t)}})},4898:function(t,e,n){var r=n(7341),i=n(7494),s=n(5085),o=n(6539),a=n(6840),u=n(4894),c=n(425),h=n(7056),l=n(1804),d=n(1564),f=c(function(t){var e=this,n=e.iterator,r=e.mapper;return new t(function(s,u){var c=function(t){e.done=!0,u(t)},f=function(t){d(n,c,t,c)},y=function(){try{t.resolve(o(i(e.next,n))).then(function(n){try{if(o(n).done)e.done=!0,s(h(void 0,!0));else{var i=n.value;try{var u=r(i,e.counter++),d=function(t){try{e.inner=l(t),p()}catch(t){f(t)}};a(u)?t.resolve(u).then(d,f):d(u)}catch(t){f(t)}}}catch(t){c(t)}},c)}catch(t){c(t)}},p=function(){var n=e.inner;if(n)try{t.resolve(o(i(n.next,n.iterator))).then(function(t){try{o(t).done?(e.inner=null,y()):s(h(t.value,!1))}catch(t){f(t)}},f)}catch(t){f(t)}else y()};p()})});r({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(t){return o(this),s(t),new f(u(this),{mapper:t,inner:null})}})},5646:function(t,e,n){var r=n(7341),i=n(4662).forEach;r({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(t){return i(this,t)}})},9560:function(t,e,n){n(7341)({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:n(2314)})},3479:function(t,e,n){var r=n(7341),i=n(7494),s=n(5085),o=n(6539),a=n(6840),u=n(6451),c=n(4894),h=n(1564),l=u("Promise"),d=TypeError;r({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(t){o(this),s(t);var e=c(this),n=e.iterator,r=e.next,u=arguments.length<2,f=u?void 0:arguments[1],y=0;return new l(function(e,s){var c=function(t){h(n,s,t,s)},p=function(){try{l.resolve(o(i(r,n))).then(function(n){try{if(o(n).done)u?s(new d("Reduce of empty iterator with no initial value")):e(f);else{var r=n.value;if(u)u=!1,f=r,p();else try{var i=t(f,r,y),h=function(t){f=t,p()};a(i)?l.resolve(i).then(h,c):h(i)}catch(t){c(t)}}y++}catch(t){s(t)}},s)}catch(t){s(t)}};p()})}})},3293:function(t,e,n){var r=n(7341),i=n(4662).some;r({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(t){return i(this,t)}})},4912:function(t,e,n){var r=n(7341),i=n(2760),s=n(4692).remove;r({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t,e=i(this),n=!0,r=0,o=arguments.length;r<o;r++)t=s(e,arguments[r]),n=n&&t;return!!n}})},78:function(t,e,n){var r=n(7341),i=n(2760),s=n(4692),o=s.get,a=s.has,u=s.set;r({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,e){var n,r,s=i(this);return a(s,t)?(n=o(s,t),"update"in e&&(n=e.update(n,t,s),u(s,t,n)),n):(r=e.insert(t,s),u(s,t,r),r)}})},1416:function(t,e,n){var r=n(7341),i=n(7722),s=n(2760),o=n(4694);r({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0);return!1!==o(e,function(t,r){if(!n(t,r,e))return!1},!0)}})},9975:function(t,e,n){var r=n(7341),i=n(7722),s=n(2760),o=n(4692),a=n(4694),u=o.Map,c=o.set;r({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new u;return a(e,function(t,i){n(t,i,e)&&c(r,i,t)}),r}})},8023:function(t,e,n){var r=n(7341),i=n(7722),s=n(2760),o=n(4694);r({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=o(e,function(t,r){if(n(t,r,e))return{key:r}},!0);return r&&r.key}})},1998:function(t,e,n){var r=n(7341),i=n(7722),s=n(2760),o=n(4694);r({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=o(e,function(t,r){if(n(t,r,e))return{value:t}},!0);return r&&r.value}})},7527:function(t,e,n){var r=n(7341),i=n(8620),s=n(2760),o=n(4694);r({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return!0===o(s(this),function(e){if(i(e,t))return!0},!0)}})},4749:function(t,e,n){var r=n(7341),i=n(2760),s=n(4694);r({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var e=s(i(this),function(e,n){if(e===t)return{key:n}},!0);return e&&e.key}})},7881:function(t,e,n){var r=n(7341),i=n(7722),s=n(2760),o=n(4692),a=n(4694),u=o.Map,c=o.set;r({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new u;return a(e,function(t,i){c(r,n(t,i,e),t)}),r}})},9365:function(t,e,n){var r=n(7341),i=n(7722),s=n(2760),o=n(4692),a=n(4694),u=o.Map,c=o.set;r({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new u;return a(e,function(t,i){c(r,i,n(t,i,e))}),r}})},2592:function(t,e,n){var r=n(7341),i=n(2760),s=n(5249),o=n(4692).set;r({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var e=i(this),n=arguments.length,r=0;r<n;)s(arguments[r++],function(t,n){o(e,t,n)},{AS_ENTRIES:!0});return e}})},1819:function(t,e,n){var r=n(7341),i=n(5085),s=n(2760),o=n(4694),a=TypeError;r({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var e=s(this),n=arguments.length<2,r=n?void 0:arguments[1];if(i(t),o(e,function(i,s){n?(n=!1,r=i):r=t(r,i,s,e)}),n)throw new a("Reduce of empty map with no initial value");return r}})},5614:function(t,e,n){var r=n(7341),i=n(7722),s=n(2760),o=n(4694);r({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0);return!0===o(e,function(t,r){if(n(t,r,e))return!0},!0)}})},7628:function(t,e,n){var r=n(7341),i=n(5085),s=n(2760),o=n(4692),a=TypeError,u=o.get,c=o.has,h=o.set;r({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,e){var n=s(this),r=arguments.length;i(e);var o=c(n,t);if(!o&&r<3)throw new a("Updating absent value");var l=o?u(n,t):i(r>2?arguments[2]:void 0)(t,n);return h(n,t,e(l,t,n)),n}})},8558:function(t,e,n){var r=n(7341),i=n(7791),s=n(1718).add;r({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=i(this),e=0,n=arguments.length;e<n;e++)s(t,arguments[e]);return t}})},7980:function(t,e,n){var r=n(7341),i=n(7791),s=n(1718).remove;r({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t,e=i(this),n=!0,r=0,o=arguments.length;r<o;r++)t=s(e,arguments[r]),n=n&&t;return!!n}})},6236:function(t,e,n){var r=n(7341),i=n(7494),s=n(5010),o=n(794);r({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return i(o,this,s(t))}})},2833:function(t,e,n){var r=n(7341),i=n(7722),s=n(7791),o=n(6137);r({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0);return!1!==o(e,function(t){if(!n(t,t,e))return!1},!0)}})},7906:function(t,e,n){var r=n(7341),i=n(7722),s=n(7791),o=n(1718),a=n(6137),u=o.Set,c=o.add;r({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new u;return a(e,function(t){n(t,t,e)&&c(r,t)}),r}})},2114:function(t,e,n){var r=n(7341),i=n(7722),s=n(7791),o=n(6137);r({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=o(e,function(t){if(n(t,t,e))return{value:t}},!0);return r&&r.value}})},2613:function(t,e,n){var r=n(7341),i=n(7494),s=n(5010),o=n(5126);r({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return i(o,this,s(t))}})},874:function(t,e,n){var r=n(7341),i=n(7494),s=n(5010),o=n(2932);r({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return i(o,this,s(t))}})},2240:function(t,e,n){var r=n(7341),i=n(7494),s=n(5010),o=n(5970);r({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return i(o,this,s(t))}})},8675:function(t,e,n){var r=n(7341),i=n(7494),s=n(5010),o=n(5267);r({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return i(o,this,s(t))}})},6857:function(t,e,n){var r=n(7341),i=n(2814),s=n(7791),o=n(6137),a=n(3576),u=i([].join),c=i([].push);r({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var e=s(this),n=void 0===t?",":a(t),r=[];return o(e,function(t){c(r,t)}),u(r,n)}})},8137:function(t,e,n){var r=n(7341),i=n(7722),s=n(7791),o=n(1718),a=n(6137),u=o.Set,c=o.add;r({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0),r=new u;return a(e,function(t){c(r,n(t,t,e))}),r}})},6501:function(t,e,n){var r=n(7341),i=n(5085),s=n(7791),o=n(6137),a=TypeError;r({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var e=s(this),n=arguments.length<2,r=n?void 0:arguments[1];if(i(t),o(e,function(i){n?(n=!1,r=i):r=t(r,i,i,e)}),n)throw new a("Reduce of empty set with no initial value");return r}})},6834:function(t,e,n){var r=n(7341),i=n(7722),s=n(7791),o=n(6137);r({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var e=s(this),n=i(t,arguments.length>1?arguments[1]:void 0);return!0===o(e,function(t){if(n(t,t,e))return!0},!0)}})},1549:function(t,e,n){var r=n(7341),i=n(7494),s=n(5010),o=n(8936);r({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return i(o,this,s(t))}})},3485:function(t,e,n){var r=n(7341),i=n(7494),s=n(5010),o=n(2688);r({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return i(o,this,s(t))}})}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports}(()=>{var t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",r="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",i=t=>{t&&t.d<1&&(t.d=1,t.forEach(t=>t.r--),t.forEach(t=>t.r--?t.r++:t()))},s=n=>n.map(n=>{if(null!==n&&"object"==typeof n){if(n[t])return n;if(n.then){var s=[];s.d=0,n.then(t=>{o[e]=t,i(s)},t=>{o[r]=t,i(s)});var o={};return o[t]=t=>t(s),o}}var a={};return a[t]=function(){},a[e]=n,a});n.a=(n,o,a)=>{a&&((u=[]).d=-1);var u,c,h,l,d=new Set,f=n.exports,y=new Promise((t,e)=>{l=e,h=t});y[e]=f,y[t]=t=>{u&&t(u),d.forEach(t),y.catch(function(){})},n.exports=y,o(n=>{c=s(n);var i,o=()=>c.map(t=>{if(t[r])throw t[r];return t[e]}),a=new Promise(e=>{(i=()=>e(o)).r=0;var n=t=>t!==u&&!d.has(t)&&(d.add(t),t&&!t.d&&(i.r++,t.push(i)));c.map(e=>e[t](n))});return i.r?a:o()},t=>(t?l(y[r]=t):h(f),i(u))),u&&u.d<0&&(u.d=0)}})(),n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}})(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="./",n.rv=()=>"1.3.11",n.ruid="bundler=rspack@1.3.11",n(3825)})();